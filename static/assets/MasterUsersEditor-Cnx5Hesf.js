import{a as x,r as U,m as z,N as O,D as I,c as d,e as a,f as v,L as D,p,g as k,F as E,h as M,o as c,s as N,n as y,t as q,w as P,l as R,T as S,_ as j}from"./index-BJmMF5V4.js";import{I as f}from"./iconify-h_ru1rcR.js";const G={class:"master-users-editor"},H={class:"editor-header"},J={class:"users-list"},K={class:"user-inputs"},W=["onClick"],X={key:0,class:"custom-select-dropdown"},Y=["onClick"],Z=["value","onInput"],ee=["onClick"],te={key:0,class:"empty-state"},se=x({__name:"MasterUsersEditor",props:{value:{}},emits:["update"],setup(B,{emit:L}){const m=B,_=L,h=[{value:"qq",label:"QQ"},{value:"telegram",label:"Telegram"},{value:"discord",label:"Discord"}],o=U(-1),w=U([]);function T(n){o.value===n?o.value=-1:o.value=n}function V(n,s){C(n,0,s),o.value=-1}function b(n){if(o.value!==-1){const s=w.value[o.value];s&&!s.contains(n.target)&&(o.value=-1)}}z(()=>{document.addEventListener("click",b)}),O(()=>{document.removeEventListener("click",b)});const g=I(()=>Array.isArray(m.value)?m.value.filter(n=>Array.isArray(n)&&n.length===2):[]),i=I(()=>Array.isArray(m.value)?m.value:[]);function $(){const n=[...i.value,["qq",""]];_("update",n)}function F(n){let s=0,l=-1;for(let t=0;t<i.value.length;t++){const r=i.value[t];if(Array.isArray(r)&&r.length===2){if(s===n){l=t;break}s++}}if(l!==-1){const t=i.value.filter((r,e)=>e!==l);_("update",t)}}function C(n,s,l){let t=0,r=-1;for(let e=0;e<i.value.length;e++){const u=i.value[e];if(Array.isArray(u)&&u.length===2){if(t===n){r=e;break}t++}}if(r!==-1){const e=i.value.map((u,Q)=>{if(Q===r&&Array.isArray(u)){const A=[...u];return A[s]=l,A}return u});_("update",e)}}return(n,s)=>(c(),d("div",G,[a("div",H,[a("h4",null,[v(p(f),{icon:"lucide:crown"}),s[0]||(s[0]=D(" 主人用户配置 ",-1))]),s[1]||(s[1]=a("p",{class:"editor-hint"},"配置拥有最高权限的用户，格式为 [平台, 用户ID]",-1))]),a("div",J,[(c(!0),d(E,null,M(g.value,(l,t)=>{var r;return c(),d("div",{key:t,class:"user-item"},[a("div",K,[a("div",{class:"custom-select-wrapper",ref_for:!0,ref:e=>w.value[t]=e},[a("div",{class:y(["custom-select-trigger input",{active:o.value===t}]),onClick:N(e=>T(t),["stop"])},[a("span",null,q(((r=h.find(e=>e.value===l[0]))==null?void 0:r.label)||l[0]),1),v(p(f),{icon:"lucide:chevron-down",class:y(["select-arrow",{rotated:o.value===t}])},null,8,["class"])],10,W),v(S,{name:"fade"},{default:P(()=>[o.value===t?(c(),d("div",X,[(c(),d(E,null,M(h,e=>a("div",{key:e.value,class:y(["custom-select-option",{selected:l[0]===e.value}]),onClick:N(u=>V(t,e.value),["stop"])},[a("span",null,q(e.label),1),l[0]===e.value?(c(),R(p(f),{key:0,icon:"lucide:check",class:"check-icon"})):k("",!0)],10,Y)),64))])):k("",!0)]),_:2},1024)],512),a("input",{type:"text",class:"input user-id-input",value:l[1],onInput:e=>C(t,1,e.target.value),placeholder:"用户ID"},null,40,Z)]),a("button",{type:"button",class:"btn-icon delete-btn",onClick:e=>F(t),title:"删除"},[v(p(f),{icon:"lucide:trash-2"})],8,ee)])}),128)),g.value.length===0?(c(),d("div",te,[v(p(f),{icon:"lucide:user-x"}),s[2]||(s[2]=a("p",null,"暂无主人用户",-1))])):k("",!0)]),a("button",{type:"button",class:"btn btn-outline add-btn",onClick:$},[v(p(f),{icon:"lucide:plus"}),s[3]||(s[3]=D(" 添加主人用户 ",-1))])]))}}),le=j(se,[["__scopeId","data-v-06d74b3d"]]);export{le as M};
