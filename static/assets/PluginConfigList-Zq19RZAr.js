import{a as x,r as u,D as L,m as P,c as o,e as s,f as V,O as I,g,Q as N,L as h,n as f,t as i,F as T,h as $,w as B,T as D,j as M,o as l,q as R,_ as S}from"./index-I9RjNgOI.js";import{l as U}from"./pluginConfig-B9mxjR0z.js";const j={class:"plugin-config-list"},q={class:"page-header"},z={class:"header-content"},A={class:"header-controls"},E={class:"search-box"},F=["disabled"],Q={class:"plugin-list-container"},O={key:0,class:"loading-state"},G={key:1,class:"error-state"},H={key:2,class:"empty-state"},J={key:3,class:"plugin-grid"},K=["onClick"],W={class:"card-content"},X={class:"plugin-details"},Y=["title"],Z=["title"],ss={class:"plugin-path-text"},es={class:"material-symbols-rounded"},ts=x({__name:"PluginConfigList",setup(ns){const b=M(),r=u(!0),d=u(""),c=u([]),a=u(""),p=u({show:!1,message:"",type:"success"}),y=L(()=>{if(!a.value)return c.value;const t=a.value.toLowerCase();return c.value.filter(e=>e.display_name.toLowerCase().includes(t)||e.plugin_name.toLowerCase().includes(t)||e.config_name.toLowerCase().includes(t))});function C(t){if(!t)return"";const e=t.split(/[/\\]/);return e.length>2?".../"+e.slice(-2).join("/"):t}function k(t){const e=["var(--md-sys-color-primary-container)","var(--md-sys-color-secondary-container)","var(--md-sys-color-tertiary-container)","var(--md-sys-color-error-container)"];let n=0;for(let m=0;m<t.length;m++)n=t.charCodeAt(m)+((n<<5)-n);const _=Math.abs(n)%e.length;return e[_]}function w(t){const e=encodeURIComponent(t.plugin_name)+"/"+encodeURIComponent(t.config_name);b.push(`/dashboard/plugin-config/${e}`)}async function v(){r.value=!0,d.value="";try{const t=await U();t.success&&t.data?c.value=t.data.plugins:d.value=t.error||"获取列表失败"}catch(t){d.value="网络请求失败",console.error(t)}finally{r.value=!1}}return P(()=>{v()}),(t,e)=>(l(),o("div",j,[s("header",q,[s("div",z,[e[6]||(e[6]=s("div",{class:"header-title-area"},[s("div",{class:"header-icon-container"},[s("span",{class:"material-symbols-rounded header-icon"},"extension")]),s("div",{class:"header-info"},[s("h1",null,"插件配置"),s("p",null,"管理已安装插件的配置文件")])],-1)),s("div",A,[s("div",E,[e[4]||(e[4]=s("span",{class:"material-symbols-rounded search-icon"},"search",-1)),I(s("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>a.value=n),type:"text",placeholder:"搜索插件...",class:"search-input"},null,512),[[N,a.value]]),a.value?(l(),o("button",{key:0,class:"clear-search-btn",onClick:e[1]||(e[1]=n=>a.value="")},[...e[3]||(e[3]=[s("span",{class:"material-symbols-rounded"},"close",-1)])])):g("",!0)]),s("button",{class:"m3-button tonal",onClick:v,disabled:r.value},[s("span",{class:f(["material-symbols-rounded",{spinning:r.value}])},i(r.value?"progress_activity":"refresh"),3),e[5]||(e[5]=h(" 刷新 ",-1))],8,F)])])]),s("div",Q,[r.value&&c.value.length===0?(l(),o("div",O,[...e[7]||(e[7]=[s("div",{class:"loading-spinner"},[s("span",{class:"material-symbols-rounded spinning"},"progress_activity")],-1),s("p",null,"正在加载插件配置...",-1)])])):d.value?(l(),o("div",G,[e[8]||(e[8]=s("div",{class:"error-icon-container"},[s("span",{class:"material-symbols-rounded"},"error")],-1)),e[9]||(e[9]=s("h3",null,"加载失败",-1)),s("p",null,i(d.value),1),s("button",{class:"m3-button filled",onClick:v},"重试")])):y.value.length===0?(l(),o("div",H,[e[10]||(e[10]=s("div",{class:"empty-icon-container"},[s("span",{class:"material-symbols-rounded"},"extension_off")],-1)),s("h3",null,i(a.value?"未找到匹配的插件":"暂无插件配置文件"),1),s("p",null,i(a.value?"请尝试更换搜索关键词":"插件安装后，其配置文件将显示在这里"),1),a.value?(l(),o("button",{key:0,class:"m3-button text",onClick:e[2]||(e[2]=n=>a.value="")},"清除搜索")):g("",!0)])):(l(),o("div",J,[(l(!0),o(T,null,$(y.value,n=>(l(),o("div",{key:n.config_path,class:"plugin-card",onClick:_=>w(n)},[s("div",W,[s("div",{class:"plugin-icon-wrapper",style:R({backgroundColor:k(n.plugin_name)})},[...e[11]||(e[11]=[s("span",{class:"material-symbols-rounded"},"settings_applications",-1)])],4),s("div",X,[s("h3",{class:"plugin-name",title:n.plugin_name},i(n.display_name),9,Y),s("div",{class:"plugin-path-container",title:n.config_path},[e[12]||(e[12]=s("span",{class:"material-symbols-rounded path-icon"},"folder",-1)),s("span",ss,i(C(n.config_path)),1)],8,Z)])]),e[13]||(e[13]=s("div",{class:"card-actions"},[s("button",{class:"action-btn"},[s("span",null,"配置"),s("span",{class:"material-symbols-rounded"},"arrow_forward")])],-1))],8,K))),128))]))]),V(D,{name:"toast"},{default:B(()=>[p.value.show?(l(),o("div",{key:0,class:f(["m3-snackbar",p.value.type])},[s("span",es,i(p.value.type==="success"?"check_circle":"error"),1),h(" "+i(p.value.message),1)],2)):g("",!0)]),_:1})]))}}),ls=S(ts,[["__scopeId","data-v-be948bc6"]]);export{ls as default};
