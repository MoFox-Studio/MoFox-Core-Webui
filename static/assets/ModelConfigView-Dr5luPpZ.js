const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BTNiInkM.js","assets/index-ClAknLIM.css"])))=>i.map(i=>d[i]);
import{a as Se,r as b,G as Te,D as oe,c as r,e as t,g as _,f as a,p as i,n as C,F as X,h as te,t as y,O as U,P as F,o,_ as Ue,m as Ne,N as ct,l as I,S as Ce,L as x,M as O,s as $,w as R,q as ie,T as N,Z as Pe,$ as Fe,A as vt,a0 as pt,U as mt,a1 as _t,V as ft,W as yt,X as bt,Y as gt}from"./index-BTNiInkM.js";import{V as kt}from"./index-DNiqwPVL.js";import{I as u}from"./iconify-B9g7Tt6U.js";import{S as We}from"./FieldEditor.vue_vue_type_style_index_0_scoped_e4edd2b4_lang-D4_5PhLE.js";import{p as Je,m as wt}from"./configDescriptions-B6rfcIUW.js";const Ct={class:"extra-params-editor"},ht={class:"editor-header"},$t={class:"header-left"},Mt={class:"mode-toggle"},xt={key:0,class:"form-mode"},It={key:0,class:"empty-state"},At={key:1,class:"form-entries"},Vt=["onUpdate:modelValue"],Pt=["onUpdate:modelValue"],St=["onClick"],Tt={key:2,class:"error-message"},Ut={key:1,class:"json-mode"},Et={class:"json-editor-wrapper"},Dt={key:0,class:"json-error"},Ot={class:"json-tips"},Lt=Se({__name:"ExtraParamsEditor",props:{modelValue:{}},emits:["update:modelValue"],setup(he,{emit:ye}){const h=he,L=ye,V=b("form"),D=b([]),P=b(""),B=b(""),T=b("");function be(){const d=h.modelValue||{};D.value=Object.entries(d).map(([m,S])=>({key:m,value:typeof S=="string"?S:JSON.stringify(S)}));try{B.value=Object.keys(d).length>0?JSON.stringify(d,null,2):"",T.value=""}catch{B.value="",T.value="æ— æ³•åºåˆ—åŒ–å½“å‰å‚æ•°"}}Te(()=>h.modelValue,()=>{be()},{immediate:!0,deep:!0});function ae(){D.value.push({key:"",value:""})}function _e(d){D.value.splice(d,1),q()}function K(d){const m=d.trim();if(m==="")return"";if(m==="true")return!0;if(m==="false")return!1;if(m==="null")return null;if(/^-?\d+$/.test(m))return parseInt(m,10);if(/^-?\d+\.\d+$/.test(m))return parseFloat(m);if(m.startsWith("{")&&m.endsWith("}")||m.startsWith("[")&&m.endsWith("]"))try{return JSON.parse(m)}catch{}return d}function q(){P.value="";const d={},m=new Set;for(const S of D.value){const A=S.key.trim();if(A){if(m.has(A)){P.value=`å‚æ•°å "${A}" é‡å¤`;return}m.add(A),d[A]=K(S.value)}}try{B.value=Object.keys(d).length>0?JSON.stringify(d,null,2):"",T.value=""}catch{T.value="åºåˆ—åŒ–å¤±è´¥"}L("update:modelValue",Object.keys(d).length>0?d:void 0)}function Y(){T.value=""}function G(){const d=B.value.trim();if(!d){D.value=[],P.value="",T.value="",L("update:modelValue",void 0);return}try{const m=JSON.parse(d);if(typeof m!="object"||m===null||Array.isArray(m)){T.value="extra_params å¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡";return}T.value="",D.value=Object.entries(m).map(([S,A])=>({key:S,value:typeof A=="string"?A:JSON.stringify(A)})),P.value="",L("update:modelValue",m)}catch(m){T.value=`JSON è§£æžé”™è¯¯: ${m.message}`}}return oe(()=>h.modelValue&&Object.keys(h.modelValue).length>0),(d,m)=>(o(),r("div",Ct,[t("div",ht,[t("div",$t,[a(i(u),{icon:"lucide:braces"}),m[3]||(m[3]=t("span",{class:"header-title"},"é¢å¤–å‚æ•° (extra_params)",-1)),m[4]||(m[4]=t("span",{class:"header-hint"},"è‡ªå®šä¹‰æ¨¡åž‹å‚æ•°",-1))]),t("div",Mt,[t("button",{class:C(["mode-btn",{active:V.value==="form"}]),onClick:m[0]||(m[0]=S=>V.value="form"),title:"è¡¨å•æ¨¡å¼"},[a(i(u),{icon:"lucide:list"}),m[5]||(m[5]=t("span",null,"è¡¨å•",-1))],2),t("button",{class:C(["mode-btn",{active:V.value==="json"}]),onClick:m[1]||(m[1]=S=>V.value="json"),title:"JSONæ¨¡å¼"},[a(i(u),{icon:"lucide:code"}),m[6]||(m[6]=t("span",null,"JSON",-1))],2)])]),V.value==="form"?(o(),r("div",xt,[D.value.length===0?(o(),r("div",It,[a(i(u),{icon:"lucide:inbox"}),m[7]||(m[7]=t("span",null,"æš‚æ— å‚æ•°ï¼Œç‚¹å‡»ä¸‹æ–¹æ·»åŠ ",-1))])):(o(),r("div",At,[(o(!0),r(X,null,te(D.value,(S,A)=>(o(),r("div",{key:A,class:"form-entry"},[U(t("input",{"onUpdate:modelValue":v=>S.key=v,type:"text",class:"entry-input key-input",placeholder:"å‚æ•°å",onInput:q},null,40,Vt),[[F,S.key]]),U(t("input",{"onUpdate:modelValue":v=>S.value=v,type:"text",class:"entry-input value-input",placeholder:"å€¼ (æ”¯æŒ true/false/æ•°å­—/å­—ç¬¦ä¸²)",onInput:q},null,40,Pt),[[F,S.value]]),t("button",{class:"remove-btn",onClick:v=>_e(A),title:"åˆ é™¤"},[a(i(u),{icon:"lucide:x"})],8,St)]))),128))])),t("button",{class:"add-btn",onClick:ae},[a(i(u),{icon:"lucide:plus"}),m[8]||(m[8]=t("span",null,"æ·»åŠ å‚æ•°",-1))]),P.value?(o(),r("div",Tt,[a(i(u),{icon:"lucide:alert-circle"}),t("span",null,y(P.value),1)])):_("",!0)])):_("",!0),V.value==="json"?(o(),r("div",Ut,[t("div",Et,[U(t("textarea",{"onUpdate:modelValue":m[2]||(m[2]=S=>B.value=S),class:C(["json-editor",{error:T.value}]),placeholder:`ä¾‹å¦‚: {
  "enable_thinking": false,
  "thinking_budget": 256,
  "custom_param": "value"
}`,rows:"8",spellcheck:"false",onInput:Y,onBlur:G},null,34),[[F,B.value]]),T.value?(o(),r("div",Dt,[a(i(u),{icon:"lucide:alert-circle"}),t("span",null,y(T.value),1)])):_("",!0)]),t("div",Ot,[a(i(u),{icon:"lucide:info"}),m[9]||(m[9]=t("div",{class:"tips-content"},[t("strong",null,"æç¤ºï¼š"),t("ul",null,[t("li",null,"å¿…é¡»æ˜¯æœ‰æ•ˆçš„ JSON å¯¹è±¡æ ¼å¼"),t("li",null,"æ”¯æŒå­—ç¬¦ä¸²ã€æ•°å­—ã€å¸ƒå°”å€¼ (true/false)"),t("li",null,"å‚æ•°åå’Œå­—ç¬¦ä¸²å€¼éœ€ä½¿ç”¨åŒå¼•å·")])],-1))])])):_("",!0)]))}}),Re=Ue(Lt,[["__scopeId","data-v-56380d1e"]]),jt={class:"model-config-editor"},Bt={class:"nav-header"},zt={class:"nav-tabs"},Ft=["onClick"],Wt={key:0,class:"tab-badge"},Jt={class:"nav-actions"},Rt={key:0,class:"search-box"},Nt=["title"],qt={class:"tab-panel"},Gt={key:0,class:"empty-state"},Qt={class:"empty-icon"},Ht={key:1,class:"provider-list"},Xt=["onClick"],Yt={class:"provider-icon"},Zt={class:"provider-main"},Kt={class:"provider-name"},el={class:"provider-meta"},tl={class:"meta-tag"},ll={class:"meta-tag"},sl={class:"provider-actions-row"},nl=["onClick"],ol={key:0,class:"provider-detail"},al={class:"detail-grid"},il={class:"form-group"},ul=["value","onInput"],rl={class:"form-group"},dl=["onClick"],cl=["onClick"],vl=["onClick"],pl=["onClick"],ml={key:0,class:"form-group full-width"},_l=["value","onInput"],fl={class:"form-group full-width"},yl={class:"label-row",style:{display:"flex","justify-content":"space-between","align-items":"center"}},bl={class:"form-group full-width"},gl=["value","onInput"],kl={class:"form-group"},wl=["onClick"],Cl=["onClick"],hl=["onClick"],$l=["onClick"],Ml=["onClick"],xl=["onClick"],Il=["onClick"],Al={class:"form-group"},Vl={class:"number-input-wrapper"},Pl=["onClick","disabled"],Sl=["value","onInput"],Tl=["onClick","disabled"],Ul={class:"form-group"},El={class:"number-input-wrapper"},Dl=["onClick","disabled"],Ol=["value","onInput"],Ll=["onClick","disabled"],jl={class:"form-group"},Bl={class:"number-input-wrapper"},zl=["onClick","disabled"],Fl=["value","onInput"],Wl=["onClick","disabled"],Jl={class:"tab-panel"},Rl={key:0,class:"empty-state"},Nl={class:"empty-icon"},ql={key:1,class:"model-list"},Gl=["onClick"],Ql={class:"model-icon"},Hl={class:"model-main"},Xl={class:"model-name"},Yl={class:"model-meta"},Zl={class:"meta-tag provider"},Kl={key:0,class:"meta-tag price"},es={key:1,class:"meta-tag feature"},ts={key:2,class:"meta-tag feature"},ls={class:"model-actions-row"},ss=["onClick"],ns={key:0,class:"model-detail"},os={class:"detail-grid"},as={class:"form-group"},is=["value","onInput"],us={class:"form-group"},rs=["value","onInput"],ds={class:"form-group"},cs=["onClick"],vs=["onClick"],ps=["onClick"],ms={class:"form-group half"},_s=["value","onInput"],fs={class:"form-group half"},ys=["value","onInput"],bs={class:"model-test-section"},gs=["onClick","disabled","title"],ks={key:0,class:"test-result"},ws={key:0,class:"test-success"},Cs={key:0,class:"response-preview"},hs={key:1,class:"test-error"},$s={class:"advanced-section"},Ms=["onClick"],xs={key:0,class:"advanced-content"},Is={class:"toggle-group"},As=["onClick"],Vs={class:"toggle-info"},Ps=["checked","onChange"],Ss=["onClick"],Ts={class:"toggle-info"},Us=["checked","onChange"],Es=["onClick"],Ds={class:"toggle-info"},Os=["checked","onChange"],Ls={key:0,class:"perturbation-options"},js={class:"form-group"},Bs=["onClick"],zs=["onClick"],Fs=["onClick"],Ws=["onClick"],Js={class:"toggle-item compact"},Rs=["checked","onChange"],Ns={class:"tab-panel"},qs={class:"selector-config"},Gs={class:"config-section"},Qs={class:"section-header"},Hs={class:"section-icon"},Xs={class:"detail-grid"},Ys={class:"form-group"},Zs={class:"field-hint",title:"ç½‘ç»œé”™è¯¯ã€æœåŠ¡å™¨é”™è¯¯ç­‰ä¸¥é‡é”™è¯¯çš„æƒ©ç½šå€æ•°"},Ks={class:"number-input-wrapper"},en=["disabled"],tn=["value"],ln=["disabled"],sn={class:"form-group"},nn={class:"field-hint",title:"æ™®é€šé”™è¯¯çš„æƒ©ç½šå¢žé‡"},on={class:"number-input-wrapper"},an=["disabled"],un=["value"],rn=["disabled"],dn={class:"form-group"},cn={class:"field-hint",title:"æ¨¡åž‹å»¶è¿Ÿåœ¨è´Ÿè½½å‡è¡¡ä¸­çš„å½±å“æƒé‡"},vn={class:"number-input-wrapper"},pn=["disabled"],mn=["value"],_n=["disabled"],fn={class:"form-group"},yn={class:"field-hint",title:"æ¨¡åž‹å¤±è´¥æ¬¡æ•°åœ¨è´Ÿè½½å‡è¡¡ä¸­çš„å½±å“æƒé‡"},bn={class:"number-input-wrapper"},gn=["disabled"],kn=["value"],wn=["disabled"],Cn={class:"form-group"},hn={class:"field-hint",title:"çŸ­æœŸä½¿ç”¨é¢‘çŽ‡åœ¨è´Ÿè½½å‡è¡¡ä¸­çš„å½±å“æƒé‡"},$n={class:"number-input-wrapper"},Mn=["disabled"],xn=["value"],In=["disabled"],An={class:"preset-section"},Vn={class:"preset-grid"},Pn={class:"preset-icon"},Sn={class:"preset-icon"},Tn={class:"preset-icon"},Un={class:"preset-icon"},En={class:"preset-icon"},Dn={class:"tab-panel"},On={class:"task-categories"},Ln=["onClick"],jn={class:"task-list"},Bn={class:"task-header"},zn={class:"task-info"},Fn={class:"task-name"},Wn={class:"task-desc"},Jn={class:"task-controls"},Rn={class:"control-row"},Nn={class:"control-group model-select"},qn=["onClick"],Gn={key:0,class:"placeholder"},Qn={key:1,class:"selected-tags"},Hn=["onClick"],Xn={class:"control-group small"},Yn=["value","onInput"],Zn={class:"control-group small"},Kn=["value","onInput"],eo={class:"control-group tiny"},to=["value","onInput"],lo={class:"modal-content"},so={class:"modal-header"},no={class:"modal-body"},oo={class:"config-field"},ao={key:1,class:"preset-hint"},io=["onClick"],uo={class:"option-content"},ro={class:"option-name"},co={class:"option-desc"},vo={key:0,class:"no-results"},po={class:"manual-config"},mo={class:"config-field"},_o={key:0,class:"config-field"},fo={key:0,class:"field-lock"},yo=["disabled"],bo={class:"config-field"},go={class:"config-field"},ko={key:0,class:"field-lock"},wo={class:"config-field"},Co={class:"config-field"},ho={class:"advanced-settings-section"},$o={key:0,class:"advanced-fields"},Mo={class:"config-field-row"},xo={class:"config-field half"},Io={class:"number-input-wrapper"},Ao=["disabled"],Vo=["disabled"],Po={class:"config-field half"},So={class:"number-input-wrapper"},To=["disabled"],Uo=["disabled"],Eo={class:"config-field-row"},Do={class:"config-field half"},Oo={class:"number-input-wrapper"},Lo=["disabled"],jo=["disabled"],Bo={class:"modal-footer"},zo=["disabled"],Fo={class:"modal-content"},Wo={class:"modal-header"},Jo={class:"modal-body"},Ro={class:"config-field"},No={style:{display:"flex",gap:"8px"}},qo={class:"config-field"},Go={class:"config-field"},Qo=["onClick"],Ho={key:0,class:"models-section"},Xo={key:0,class:"loading-models"},Yo={key:1,class:"fetch-error"},Zo={key:2,class:"available-models"},Ko={class:"models-header"},ea={class:"model-search-box"},ta={class:"models-list"},la=["onClick"],sa={class:"model-info"},na={class:"model-id"},oa={key:0,class:"model-name"},aa={key:0,class:"no-models-found"},ia={class:"config-field-row"},ua={class:"config-field"},ra={class:"config-field"},da={class:"advanced-params-section"},ca={class:"advanced-header-left"},va={class:"advanced-hint"},pa={class:"advanced-params-content"},ma={class:"config-field"},_a={class:"config-field"},fa={class:"slider-with-input"},ya=["value"],ba={class:"feature-toggles"},ga={class:"feature-toggle-info"},ka={class:"feature-toggle-info"},wa={key:0,class:"perturbation-sub-options"},Ca={class:"config-field"},ha={class:"modal-footer"},$a=["disabled"],Ma=Se({__name:"ModelConfigEditor",props:{parsedData:{},editedValues:{}},emits:["update"],setup(he,{emit:ye}){const h=he,L=ye,V=b("providers"),D=b(""),P=b(0),B=b(null),T=b("core"),be=oe(()=>[{key:"providers",name:"æä¾›å•†",icon:"lucide:cloud",count:E.value.length},{key:"models",name:"æ¨¡åž‹",icon:"lucide:cpu",count:k.value.length},{key:"selector",name:"é€‰æ‹©å™¨",icon:"lucide:settings-2",count:void 0},{key:"tasks",name:"ä»»åŠ¡é…ç½®",icon:"lucide:list-checks",count:void 0}]),ae=[{key:"core",name:"æ ¸å¿ƒåŠŸèƒ½",icon:"lucide:star"},{key:"media",name:"å¤šåª’ä½“",icon:"lucide:image"},{key:"memory",name:"è®°å¿†ç³»ç»Ÿ",icon:"lucide:brain"},{key:"lpmm",name:"çŸ¥è¯†åº“",icon:"lucide:database"},{key:"other",name:"å…¶ä»–",icon:"lucide:more-horizontal"}],_e={utils:"core",utils_small:"core",replyer:"core",planner:"core",emotion:"core",mood:"core",maizone:"core",tool_use:"core",anti_injection:"core",vlm:"media",emoji_vlm:"media",utils_video:"media",voice:"media",embedding:"memory",memory_short_term_builder:"memory",memory_short_term_decider:"memory",memory_long_term_builder:"memory",memory_judge:"memory",lpmm_entity_extract:"lpmm",lpmm_rdf_build:"lpmm",lpmm_qa:"lpmm",schedule_generator:"other",monthly_plan_generator:"other",relationship_tracker:"other"},K=b({}),q=b(!1),Y=b(!1),G=b(!1),d=b(null),m=b({});function S(n){const e=n.getBoundingClientRect();m.value={top:`${e.bottom}px`,left:`${e.left}px`,width:`${e.width}px`,position:"fixed",zIndex:"9999",marginTop:"4px"}}function A(n,e){d.value===n?d.value=null:(e&&S(e.currentTarget),d.value=n)}const v=b({name:"",base_url:"",api_key:[],client_type:"openai",max_retry:2,timeout:30,retry_interval:10,aws_secret_key:"",aws_region:"us-east-1"}),Z=b(null),re=b(""),ce=b(!1),ee=oe(()=>Z.value!==null&&Z.value.name!=="è‡ªå®šä¹‰"),$e=oe(()=>{if(!re.value)return Je;const n=re.value.toLowerCase();return Je.filter(e=>e.name.toLowerCase().includes(n)||e.description.toLowerCase().includes(n))}),p=b({model_identifier:"",name:"",api_provider:"",price_in:0,price_out:0,max_tokens:void 0,temperature:void 0,anti_truncation:!1,enable_prompt_perturbation:!1,perturbation_strength:"light",enable_semantic_variants:!1,extra_params:{}}),ge=b(""),de=b("");b({});const E=oe(()=>{if(h.editedValues&&"api_providers"in h.editedValues)return h.editedValues.api_providers;const n=h.parsedData;return Array.isArray(n.api_providers)?n.api_providers:[]}),k=oe(()=>{if(h.editedValues&&"models"in h.editedValues)return h.editedValues.models;const n=h.parsedData;return Array.isArray(n.models)?n.models:[]}),c=oe(()=>{if(h.editedValues&&"model_selector"in h.editedValues)return h.editedValues.model_selector;const n=h.parsedData;return n.model_selector&&typeof n.model_selector=="object"?n.model_selector:{critical_penalty_multiplier:5,default_penalty_increment:1,latency_weight:200,penalty_weight:300,usage_penalty_weight:1e3}}),w=oe(()=>{if(!D.value)return k.value;const n=D.value.toLowerCase();return k.value.filter(e=>{var l,s,f;return((l=e.name)==null?void 0:l.toLowerCase().includes(n))||((s=e.model_identifier)==null?void 0:s.toLowerCase().includes(n))||((f=e.api_provider)==null?void 0:f.toLowerCase().includes(n))})}),se=oe(()=>{const n={};for(const[e,l]of Object.entries(wt))(_e[e]||"other")===T.value&&(n[e]=l);return n});function fe(n){K.value[n]=!K.value[n]}function Me(n){const e={openai:"simple-icons:openai",claude:"simple-icons:anthropic",anthropic:"simple-icons:anthropic",gemini:"simple-icons:google",google:"simple-icons:google",qwen:"lucide:brain",é€šä¹‰:"lucide:brain",deepseek:"lucide:brain-circuit",siliconflow:"lucide:cpu",ç¡…åŸº:"lucide:cpu",aws:"simple-icons:amazonaws",bedrock:"simple-icons:amazonaws",amazon:"simple-icons:amazonaws"},l=n.toLowerCase();for(const[s,f]of Object.entries(e))if(l.includes(s))return f;return"lucide:cloud"}function Ve(n){return{openai:"OpenAI å…¼å®¹",aiohttp_gemini:"Geminiï¼ˆGoogleï¼‰",bedrock:"AWS Bedrock"}[n||"openai"]||"OpenAI å…¼å®¹"}function qe(n){return n?k.value.filter(e=>e.api_provider===n).length:0}function Q(n,e,l){const s={...E.value[n],[e]:l},f=[...E.value];f[n]=s,L("update","api_providers",f)}function H(n,e){const l={...c.value,[n]:e};L("update","model_selector",l)}function ke(n){const l={production:{critical_penalty_multiplier:8,default_penalty_increment:2,latency_weight:300,penalty_weight:500,usage_penalty_weight:1e3},realtime:{critical_penalty_multiplier:5,default_penalty_increment:1,latency_weight:500,penalty_weight:200,usage_penalty_weight:800},development:{critical_penalty_multiplier:2,default_penalty_increment:.5,latency_weight:150,penalty_weight:150,usage_penalty_weight:1200},batch:{critical_penalty_multiplier:5,default_penalty_increment:1,latency_weight:50,penalty_weight:300,usage_penalty_weight:1500},performance:{critical_penalty_multiplier:5,default_penalty_increment:1,latency_weight:200,penalty_weight:300,usage_penalty_weight:300}}[n];l&&L("update","model_selector",l)}function ve(n,e,l){const s=E.value[n];if(!s)return;const j={...s.extra_params||{},[e]:l};l===""&&delete j[e];const g={...s,extra_params:j},J=[...E.value];J[n]=g,L("update","api_providers",J)}function W(n,e,l){const s={...k.value[n],[e]:l},f=[...k.value];f[n]=s,L("update","models",f)}function Ge(){const n=ge.value.trim();if(!n){p.value.extra_params={},de.value="";return}try{const e=JSON.parse(n);if(typeof e!="object"||e===null||Array.isArray(e)){de.value="extra_params å¿…é¡»æ˜¯ä¸€ä¸ªå¯¹è±¡";return}p.value.extra_params=e,de.value=""}catch(e){de.value=`JSON è§£æžé”™è¯¯: ${e.message}`}}function Qe(n){Z.value=n,v.value={name:n.name==="è‡ªå®šä¹‰"?"":n.name,base_url:n.base_url,api_key:[],client_type:n.client_type,max_retry:v.value.max_retry??2,timeout:n.client_type==="bedrock"?60:v.value.timeout??30,retry_interval:v.value.retry_interval??10,aws_secret_key:"",aws_region:"us-east-1"},re.value=""}function He(){const n=v.value.client_type==="bedrock";if(!v.value.name||!n&&!v.value.base_url)return;const e={name:v.value.name,base_url:v.value.base_url,api_key:v.value.api_key,client_type:v.value.client_type,max_retry:v.value.max_retry??2,timeout:v.value.timeout??30,retry_interval:v.value.retry_interval??10};if(n){const s={region:v.value.aws_region||"us-east-1"};v.value.aws_secret_key&&(s.aws_secret_key=v.value.aws_secret_key),e.extra_params=s}const l=[...E.value,e];L("update","api_providers",l),q.value=!1,v.value={name:"",base_url:"",api_key:[],client_type:"openai",max_retry:2,timeout:30,retry_interval:10,aws_secret_key:"",aws_region:"us-east-1"},Z.value=null,re.value="",ce.value=!1,P.value=l.length-1}function Xe(n){if(!confirm("ç¡®å®šè¦åˆ é™¤æ­¤æä¾›å•†å—ï¼Ÿ"))return;const e=E.value.filter((l,s)=>s!==n);L("update","api_providers",e),P.value===n&&(P.value=null)}function Ye(){if(!p.value.model_identifier||!p.value.name||ge.value.trim()&&(Ge(),de.value))return;const n={model_identifier:p.value.model_identifier,name:p.value.name,api_provider:p.value.api_provider,price_in:p.value.price_in,price_out:p.value.price_out},e={...p.value.extra_params||{}};p.value.max_tokens!==void 0&&p.value.max_tokens>0&&(e.max_tokens=p.value.max_tokens),p.value.temperature!==void 0&&p.value.temperature>=0&&(e.temperature=p.value.temperature),Object.keys(e).length>0&&(n.extra_params=e),p.value.anti_truncation&&(n.anti_truncation=!0),p.value.enable_prompt_perturbation&&(n.enable_prompt_perturbation=!0),p.value.perturbation_strength&&p.value.perturbation_strength!=="light"&&(n.perturbation_strength=p.value.perturbation_strength),p.value.enable_semantic_variants&&(n.enable_semantic_variants=!0);const l=[...k.value,n];L("update","models",l),Y.value=!1,G.value=!1,le.value=[],ne.value=null,me.value="",p.value={model_identifier:"",name:"",api_provider:"",price_in:0,price_out:0,max_tokens:void 0,temperature:void 0,anti_truncation:!1,enable_prompt_perturbation:!1,perturbation_strength:"light",enable_semantic_variants:!1,extra_params:{}},ge.value="",de.value="",B.value=l.length-1}function Ze(n){if(!confirm("ç¡®å®šè¦åˆ é™¤æ­¤æ¨¡åž‹å—ï¼Ÿ"))return;const e=k.value.filter((l,s)=>s!==n);L("update","models",e),B.value===n&&(B.value=null)}function we(n){const e=`model_task_config.${n}.model_list`;if(h.editedValues&&e in h.editedValues)return h.editedValues[e];const s=h.parsedData.model_task_config;return!s||!s[n]?[]:s[n].model_list||[]}function Ke(n,e){L("update",`model_task_config.${n}.model_list`,e)}const ue=b(null);function et(n,e){ue.value===n?ue.value=null:(e&&S(e.currentTarget),ue.value=n)}function tt(n,e){const l=we(n),s=l.indexOf(e);let f;s>=0?f=l.filter(j=>j!==e):f=[...l,e],Ke(n,f)}function lt(n){const e=`model_task_config.${n}.temperature`;if(h.editedValues&&e in h.editedValues)return h.editedValues[e];const s=h.parsedData.model_task_config;if(!(!s||!s[n]))return s[n].temperature}function st(n,e){isNaN(e)||L("update",`model_task_config.${n}.temperature`,e)}function nt(n){const e=`model_task_config.${n}.max_tokens`;if(h.editedValues&&e in h.editedValues)return h.editedValues[e];const s=h.parsedData.model_task_config;if(!(!s||!s[n]))return s[n].max_tokens}function ot(n,e){isNaN(e)||e<1||L("update",`model_task_config.${n}.max_tokens`,e)}function at(n){const e=`model_task_config.${n}.concurrency_count`;if(h.editedValues&&e in h.editedValues)return h.editedValues[e]??1;const s=h.parsedData.model_task_config;return!s||!s[n]?1:s[n].concurrency_count??1}function it(n,e){e<1&&(e=1),e>100&&(e=100),L("update",`model_task_config.${n}.concurrency_count`,e)}const pe=b({}),z=b({}),xe=b(!1),le=b([]),ne=b(null),me=b("");async function ut(n){if(console.log("ðŸ§ª æµ‹è¯•æ¨¡åž‹è¿žé€šæ€§:",n),!n){console.warn("âš ï¸ æ¨¡åž‹åç§°ä¸ºç©º");return}const{testModelConnection:e}=await Fe(async()=>{const{testModelConnection:l}=await import("./index-BTNiInkM.js").then(s=>s.aK);return{testModelConnection:l}},__vite__mapDeps([0,1]));pe.value[n]=!0,delete z.value[n],console.log("ðŸ“¡ å¼€å§‹æµ‹è¯•æ¨¡åž‹:",n);try{const l=await e(n);console.log("âœ… æµ‹è¯•å“åº”:",l),l.success&&l.data?z.value[n]={connected:l.data.connected,response_time:l.data.response_time,response_text:l.data.response_text,error:l.data.error}:z.value[n]={connected:!1,error:l.error||"æµ‹è¯•å¤±è´¥"}}catch(l){console.error("âŒ æµ‹è¯•å‡ºé”™:",l),z.value[n]={connected:!1,error:l.message||"ç½‘ç»œé”™è¯¯"}}finally{pe.value[n]=!1,console.log("ðŸ æµ‹è¯•å®Œæˆ:",n,z.value[n])}}function rt(n){var e,l;return n?pe.value[n]?"æµ‹è¯•ä¸­...":((e=z.value[n])==null?void 0:e.connected)===!0?"è¿žæŽ¥æˆåŠŸï¼Œç‚¹å‡»é‡æ–°æµ‹è¯•":((l=z.value[n])==null?void 0:l.connected)===!1?"è¿žæŽ¥å¤±è´¥ï¼Œç‚¹å‡»é‡è¯•":"æµ‹è¯•æ¨¡åž‹è¿žé€šæ€§":"è¯·å…ˆé…ç½®æ¨¡åž‹åç§°"}function dt(n){return pe.value[n]?"æµ‹è¯•ä¸­":z.value[n]?"é‡æ–°æµ‹è¯•":"æµ‹è¯•è¿žæŽ¥"}const Ee=oe(()=>{if(!me.value)return le.value;const n=me.value.toLowerCase();return le.value.filter(e=>e.id.toLowerCase().includes(n)||e.name.toLowerCase().includes(n))});async function Ie(){let n=null;if(Y.value&&p.value.api_provider)n=p.value.api_provider;else if(P.value!==null){const s=E.value[P.value];n=(s==null?void 0:s.name)||null}if(!n){const s="è¯·å…ˆé€‰æ‹©ä¸€ä¸ªæä¾›å•†";console.error("âŒ",s),ne.value=s;return}const e=E.value.find(s=>s.name===n);if(!e||!e.name||!e.base_url){const s="æä¾›å•†é…ç½®ä¸å®Œæ•´ï¼ˆéœ€è¦åç§°å’Œåœ°å€ï¼‰";ne.value=s;return}let l="";if(Array.isArray(e.api_key)?l=e.api_key[0]||"":l=String(e.api_key||""),!l&&e.client_type!=="ollama"){const s="è¯·å…ˆé…ç½®APIå¯†é’¥";console.warn("âš ï¸",s),ne.value=s;return}xe.value=!0,ne.value=null,le.value=[];try{const{getAvailableModels:s}=await Fe(async()=>{const{getAvailableModels:g}=await import("./index-BTNiInkM.js").then(J=>J.aK);return{getAvailableModels:g}},__vite__mapDeps([0,1])),f={provider_name:e.name,base_url:e.base_url,api_key:l,client_type:e.client_type||"openai"};console.log("ðŸ“¤ å‘é€è¯·æ±‚å‚æ•°:",f);const j=await s(f);if(console.log("ðŸ“¥ æ”¶åˆ°å“åº”:",j),j.success&&j.data){const g=j.data;if(g.success&&g.models){if(le.value=g.models.map(J=>({id:J.id,name:J.name||J.id})),console.log(`âœ… æˆåŠŸèŽ·å– ${le.value.length} ä¸ªæ¨¡åž‹:`,le.value.slice(0,5)),Y.value&&le.value.length>0&&!p.value.model_identifier){const J=le.value[0];J&&(p.value.model_identifier=J.id,p.value.name=J.name,console.log("âœ¨ è‡ªåŠ¨å¡«å……ç¬¬ä¸€ä¸ªæ¨¡åž‹:",J))}}else ne.value=g.error||"èŽ·å–æ¨¡åž‹åˆ—è¡¨å¤±è´¥",console.error("âŒ èŽ·å–æ¨¡åž‹åˆ—è¡¨å¤±è´¥:",g.error)}else ne.value=j.error||"èŽ·å–æ¨¡åž‹åˆ—è¡¨å¤±è´¥",console.error("âŒ èŽ·å–æ¨¡åž‹åˆ—è¡¨å¤±è´¥:",j.error)}catch(s){ne.value=`è¯·æ±‚å¤±è´¥: ${s.message||String(s)}`,console.error("âŒ èŽ·å–æ¨¡åž‹åˆ—è¡¨å¼‚å¸¸:",s)}finally{xe.value=!1,console.log("ðŸ èŽ·å–æ¨¡åž‹åˆ—è¡¨å®Œæˆ")}}function Ae(n){var e,l,s;if(n&&n.target){const f=n.target;if((e=f.classList)!=null&&e.contains("options-list")||(l=f.closest)!=null&&l.call(f,".options-list")||(s=f.closest)!=null&&s.call(f,".select-options"))return}d.value=null,ue.value=null}return Ne(()=>{window.addEventListener("resize",Ae),window.addEventListener("scroll",Ae,!0)}),ct(()=>{window.removeEventListener("resize",Ae),window.removeEventListener("scroll",Ae,!0)}),Te(()=>h.parsedData,()=>{E.value.length>0&&P.value===null&&(P.value=0)},{immediate:!0}),(n,e)=>(o(),r("div",jt,[t("div",Bt,[t("div",zt,[(o(!0),r(X,null,te(be.value,l=>(o(),r("button",{key:l.key,class:C(["nav-tab",{active:V.value===l.key}]),onClick:s=>V.value=l.key},[a(i(u),{icon:l.icon},null,8,["icon"]),t("span",null,y(l.name),1),l.count!==void 0?(o(),r("span",Wt,y(l.count),1)):_("",!0)],10,Ft))),128))]),t("div",Jt,[V.value==="models"?(o(),r("div",Rt,[a(i(u),{icon:"lucide:search"}),U(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>D.value=l),placeholder:"æœç´¢...",class:"search-input"},null,512),[[F,D.value]]),D.value?(o(),r("button",{key:0,class:"clear-search",onClick:e[1]||(e[1]=l=>D.value="")},[a(i(u),{icon:"lucide:x"})])):_("",!0)])):_("",!0),V.value==="models"||V.value==="providers"?(o(),r("button",{key:1,class:"add-btn",onClick:e[2]||(e[2]=l=>V.value==="providers"?q.value=!0:Y.value=!0),title:V.value==="providers"?"æ·»åŠ æä¾›å•†":"æ·»åŠ æ¨¡åž‹"},[a(i(u),{icon:"lucide:plus"}),t("span",null,y(V.value==="providers"?"æ·»åŠ æä¾›å•†":V.value==="models"?"æ·»åŠ æ¨¡åž‹":""),1)],8,Nt)):_("",!0)])]),U(t("div",qt,[E.value.length===0?(o(),r("div",Gt,[t("div",Qt,[a(i(u),{icon:"lucide:cloud-off"})]),e[105]||(e[105]=t("h3",null,"æš‚æ— é…ç½®çš„æä¾›å•†",-1)),e[106]||(e[106]=t("p",null,"æ·»åŠ ä¸€ä¸ª API æä¾›å•†ä»¥å¼€å§‹ä½¿ç”¨ AI æ¨¡åž‹",-1)),t("button",{class:"btn btn-primary",onClick:e[3]||(e[3]=l=>q.value=!0)},[a(i(u),{icon:"lucide:plus"}),e[104]||(e[104]=x(" æ·»åŠ ç¬¬ä¸€ä¸ªæä¾›å•† ",-1))])])):(o(),r("div",Ht,[(o(!0),r(X,null,te(E.value,(l,s)=>(o(),r("div",{key:s,class:C(["provider-item",{active:P.value===s}])},[t("div",{class:"provider-row",onClick:f=>P.value=P.value===s?null:s},[t("div",Yt,[a(i(u),{icon:Me(l.name||"")},null,8,["icon"])]),t("div",Zt,[t("div",Kt,y(l.name||"æœªå‘½åæä¾›å•†"),1),t("div",el,[t("span",tl,y(Ve(l.client_type)),1),t("span",ll,y(qe(l.name))+" ä¸ªæ¨¡åž‹",1)])]),t("div",sl,[t("button",{class:"icon-btn",onClick:$(f=>Xe(s),["stop"]),title:"åˆ é™¤"},[a(i(u),{icon:"lucide:trash-2"})],8,nl),a(i(u),{icon:P.value===s?"lucide:chevron-up":"lucide:chevron-down",class:"expand-icon"},null,8,["icon"])])],8,Xt),a(N,{name:"slide"},{default:R(()=>{var f,j;return[P.value===s?(o(),r("div",ol,[t("div",al,[t("div",il,[e[107]||(e[107]=t("label",null,"æä¾›å•†åç§°",-1)),t("input",{type:"text",class:"form-input",value:l.name,onInput:g=>Q(s,"name",g.target.value),placeholder:"ä¾‹å¦‚: DeepSeek"},null,40,ul)]),t("div",rl,[e[111]||(e[111]=t("label",null,"å®¢æˆ·ç«¯ç±»åž‹",-1)),t("div",{class:C(["custom-select",{open:d.value===`provider-client-${s}`}])},[t("div",{class:"select-trigger",onClick:$(g=>A(`provider-client-${s}`,g),["stop"])},[t("span",null,y(Ve(l.client_type)),1),a(i(u),{icon:"lucide:chevron-down",class:C(["chevron",{rotated:d.value===`provider-client-${s}`}])},null,8,["class"])],8,dl),(o(),I(O,{to:"body"},[a(N,{name:"dropdown-fade"},{default:R(()=>[d.value===`provider-client-${s}`?(o(),r("div",{key:0,class:"select-options",style:ie(m.value)},[t("div",{class:"select-option",onClick:g=>{Q(s,"client_type","openai"),d.value=null}},[...e[108]||(e[108]=[t("span",null,"OpenAI å…¼å®¹",-1)])],8,cl),t("div",{class:"select-option",onClick:g=>{Q(s,"client_type","aiohttp_gemini"),d.value=null}},[...e[109]||(e[109]=[t("span",null,"Geminiï¼ˆGoogleï¼‰",-1)])],8,vl),t("div",{class:"select-option",onClick:g=>{Q(s,"client_type","bedrock"),d.value=null}},[...e[110]||(e[110]=[t("span",null,"AWS Bedrock",-1)])],8,pl)],4)):_("",!0)]),_:2},1024)])),(o(),I(O,{to:"body"},[d.value===`provider-client-${s}`?(o(),r("div",{key:0,class:"dropdown-overlay",onClick:e[4]||(e[4]=$(g=>d.value=null,["stop"]))})):_("",!0)]))],2)]),l.client_type!=="bedrock"?(o(),r("div",ml,[e[112]||(e[112]=t("label",null,"API åœ°å€",-1)),t("input",{type:"text",class:"form-input",value:l.base_url,onInput:g=>Q(s,"base_url",g.target.value),placeholder:"https://api.example.com/v1"},null,40,_l)])):_("",!0),t("div",fl,[t("div",yl,[t("label",null,y(l.client_type==="bedrock"?"AWS Access Key ID":"API å¯†é’¥"),1)]),a(i(We),{value:Array.isArray(l.api_key)?l.api_key:l.api_key?[String(l.api_key)]:[],onUpdate:g=>Q(s,"api_key",g),placeholder:"è¾“å…¥ API å¯†é’¥","add-button-text":"æ·»åŠ å¤‡ç”¨å¯†é’¥","empty-text":"è¯·æ·»åŠ è‡³å°‘ä¸€ä¸ª API å¯†é’¥","is-secret":!0},null,8,["value","onUpdate"]),e[113]||(e[113]=t("p",{class:"field-hint",style:{"margin-top":"4px","font-size":"12px",color:"var(--text-tertiary)"}}," æ”¯æŒé…ç½®å¤šä¸ª API å¯†é’¥ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨è½®è¯¢ä½¿ç”¨ ",-1))]),l.client_type==="bedrock"?(o(),r(X,{key:1},[t("div",bl,[e[114]||(e[114]=t("label",null,"AWS Secret Key",-1)),t("input",{type:"password",class:"form-input",value:((f=l.extra_params)==null?void 0:f.aws_secret_key)??"",onInput:g=>ve(s,"aws_secret_key",g.target.value),placeholder:"ä½ çš„ AWS Secret Access Keyï¼ˆIAM è§’è‰²æ¨¡å¼å¯ç•™ç©ºï¼‰"},null,40,gl),e[115]||(e[115]=t("p",{class:"field-hint",style:{"margin-top":"4px","font-size":"12px",color:"var(--text-tertiary)"}}," IAM è§’è‰²æ¨¡å¼ä¸‹æ— éœ€é…ç½®ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨ä½¿ç”¨çŽ¯å¢ƒå˜é‡è®¤è¯ ",-1))]),t("div",kl,[e[122]||(e[122]=t("label",null,"AWS åŒºåŸŸ",-1)),t("div",{class:C(["custom-select",{open:d.value===`provider-region-${s}`}])},[t("div",{class:"select-trigger",onClick:$(g=>A(`provider-region-${s}`,g),["stop"])},[t("span",null,y(((j=l.extra_params)==null?void 0:j.region)??"us-east-1"),1),a(i(u),{icon:"lucide:chevron-down",class:C(["chevron",{rotated:d.value===`provider-region-${s}`}])},null,8,["class"])],8,wl),(o(),I(O,{to:"body"},[a(N,{name:"dropdown-fade"},{default:R(()=>[d.value===`provider-region-${s}`?(o(),r("div",{key:0,class:"select-options",style:ie(m.value)},[t("div",{class:"select-option",onClick:g=>{ve(s,"region","us-east-1"),d.value=null}},[...e[116]||(e[116]=[t("span",null,"us-east-1 (å¼—å‰å°¼äºšåŒ—éƒ¨)",-1)])],8,Cl),t("div",{class:"select-option",onClick:g=>{ve(s,"region","us-west-2"),d.value=null}},[...e[117]||(e[117]=[t("span",null,"us-west-2 (ä¿„å‹’å†ˆ)",-1)])],8,hl),t("div",{class:"select-option",onClick:g=>{ve(s,"region","eu-central-1"),d.value=null}},[...e[118]||(e[118]=[t("span",null,"eu-central-1 (æ³•å…°å…‹ç¦)",-1)])],8,$l),t("div",{class:"select-option",onClick:g=>{ve(s,"region","eu-west-1"),d.value=null}},[...e[119]||(e[119]=[t("span",null,"eu-west-1 (çˆ±å°”å…°)",-1)])],8,Ml),t("div",{class:"select-option",onClick:g=>{ve(s,"region","ap-southeast-1"),d.value=null}},[...e[120]||(e[120]=[t("span",null,"ap-southeast-1 (æ–°åŠ å¡)",-1)])],8,xl),t("div",{class:"select-option",onClick:g=>{ve(s,"region","ap-northeast-1"),d.value=null}},[...e[121]||(e[121]=[t("span",null,"ap-northeast-1 (ä¸œäº¬)",-1)])],8,Il)],4)):_("",!0)]),_:2},1024)])),(o(),I(O,{to:"body"},[d.value===`provider-region-${s}`?(o(),r("div",{key:0,class:"dropdown-overlay",onClick:e[5]||(e[5]=$(g=>d.value=null,["stop"]))})):_("",!0)]))],2)])],64)):_("",!0),t("div",Al,[e[123]||(e[123]=t("label",null,"æœ€å¤§é‡è¯•",-1)),t("div",Vl,[t("button",{class:"number-btn",onClick:g=>Q(s,"max_retry",(l.max_retry??2)-1),disabled:(l.max_retry??2)<=0},[a(i(u),{icon:"lucide:minus"})],8,Pl),t("input",{type:"number",class:"form-input number-center",value:l.max_retry??2,onInput:g=>Q(s,"max_retry",parseInt(g.target.value)),min:"0",max:"10"},null,40,Sl),t("button",{class:"number-btn",onClick:g=>Q(s,"max_retry",(l.max_retry??2)+1),disabled:(l.max_retry??2)>=10},[a(i(u),{icon:"lucide:plus"})],8,Tl)])]),t("div",Ul,[e[124]||(e[124]=t("label",null,"è¶…æ—¶(ç§’)",-1)),t("div",El,[t("button",{class:"number-btn",onClick:g=>Q(s,"timeout",(l.timeout??30)-5),disabled:(l.timeout??30)<=5},[a(i(u),{icon:"lucide:minus"})],8,Dl),t("input",{type:"number",class:"form-input number-center",value:l.timeout??30,onInput:g=>Q(s,"timeout",parseInt(g.target.value)),min:"5",max:"300",step:"5"},null,40,Ol),t("button",{class:"number-btn",onClick:g=>Q(s,"timeout",(l.timeout??30)+5),disabled:(l.timeout??30)>=300},[a(i(u),{icon:"lucide:plus"})],8,Ll)])]),t("div",jl,[e[125]||(e[125]=t("label",null,"é‡è¯•é—´éš”(ç§’)",-1)),t("div",Bl,[t("button",{class:"number-btn",onClick:g=>Q(s,"retry_interval",(l.retry_interval??10)-1),disabled:(l.retry_interval??10)<=1},[a(i(u),{icon:"lucide:minus"})],8,zl),t("input",{type:"number",class:"form-input number-center",value:l.retry_interval??10,onInput:g=>Q(s,"retry_interval",parseInt(g.target.value)),min:"1",max:"60"},null,40,Fl),t("button",{class:"number-btn",onClick:g=>Q(s,"retry_interval",(l.retry_interval??10)+1),disabled:(l.retry_interval??10)>=60},[a(i(u),{icon:"lucide:plus"})],8,Wl)])])])])):_("",!0)]}),_:2},1024)],2))),128))]))],512),[[Ce,V.value==="providers"]]),U(t("div",Jl,[k.value.length===0?(o(),r("div",Rl,[t("div",Nl,[a(i(u),{icon:"lucide:bot"})]),e[127]||(e[127]=t("h3",null,"æš‚æ— é…ç½®çš„æ¨¡åž‹",-1)),e[128]||(e[128]=t("p",null,"æ·»åŠ ä¸€ä¸ª AI æ¨¡åž‹ä»¥å¯ç”¨å„é¡¹åŠŸèƒ½",-1)),t("button",{class:"btn btn-primary",onClick:e[6]||(e[6]=l=>Y.value=!0)},[a(i(u),{icon:"lucide:plus"}),e[126]||(e[126]=x(" æ·»åŠ ç¬¬ä¸€ä¸ªæ¨¡åž‹ ",-1))])])):(o(),r("div",ql,[(o(!0),r(X,null,te(w.value,(l,s)=>(o(),r("div",{key:s,class:C(["model-item",{active:B.value===s}])},[t("div",{class:"model-row",onClick:f=>B.value=B.value===s?null:s},[t("div",Ql,[a(i(u),{icon:Me(l.api_provider||"")},null,8,["icon"])]),t("div",Hl,[t("div",Xl,y(l.name||l.model_identifier||"æœªå‘½åæ¨¡åž‹"),1),t("div",Yl,[t("span",Zl,y(l.api_provider||"æœªæŒ‡å®š"),1),l.price_in||l.price_out?(o(),r("span",Kl," Â¥"+y(l.price_in??0)+"/"+y(l.price_out??0)+"/M ",1)):_("",!0),l.anti_truncation?(o(),r("span",es,"é˜²æˆªæ–­")):_("",!0),l.enable_prompt_perturbation?(o(),r("span",ts,"æ‰°åŠ¨")):_("",!0)])]),t("div",ls,[t("button",{class:"icon-btn",onClick:$(f=>Ze(s),["stop"]),title:"åˆ é™¤"},[a(i(u),{icon:"lucide:trash-2"})],8,ss),a(i(u),{icon:B.value===s?"lucide:chevron-up":"lucide:chevron-down",class:"expand-icon"},null,8,["icon"])])],8,Gl),a(N,{name:"slide"},{default:R(()=>{var f,j,g,J,De,Oe,Le,je,Be,ze;return[B.value===s?(o(),r("div",ns,[t("div",os,[t("div",as,[e[129]||(e[129]=t("label",null,"æ¨¡åž‹æ ‡è¯†ç¬¦",-1)),t("input",{type:"text",class:"form-input",value:l.model_identifier,onInput:M=>W(s,"model_identifier",M.target.value),placeholder:"deepseek-chat"},null,40,is)]),t("div",us,[e[130]||(e[130]=t("label",null,"æ¨¡åž‹åç§°",-1)),t("input",{type:"text",class:"form-input",value:l.name,onInput:M=>W(s,"name",M.target.value),placeholder:"deepseek-v3"},null,40,rs)]),t("div",ds,[e[132]||(e[132]=t("label",null,"API æä¾›å•†",-1)),t("div",{class:C(["custom-select",{open:d.value===`model-provider-${s}`}])},[t("div",{class:"select-trigger",onClick:$(M=>A(`model-provider-${s}`,M),["stop"])},[t("span",null,y(l.api_provider||"è¯·é€‰æ‹©"),1),a(i(u),{icon:"lucide:chevron-down",class:C(["chevron",{rotated:d.value===`model-provider-${s}`}])},null,8,["class"])],8,cs),(o(),I(O,{to:"body"},[a(N,{name:"dropdown-fade"},{default:R(()=>[d.value===`model-provider-${s}`?(o(),r("div",{key:0,class:"select-options",style:ie(m.value)},[t("div",{class:"select-option",onClick:M=>{W(s,"api_provider",""),d.value=null}},[...e[131]||(e[131]=[t("span",null,"è¯·é€‰æ‹©",-1)])],8,vs),(o(!0),r(X,null,te(E.value,M=>(o(),r("div",{key:M.name,class:"select-option",onClick:Za=>{W(s,"api_provider",M.name),d.value=null}},[t("span",null,y(M.name),1)],8,ps))),128))],4)):_("",!0)]),_:2},1024)])),(o(),I(O,{to:"body"},[d.value===`model-provider-${s}`?(o(),r("div",{key:0,class:"dropdown-overlay",onClick:e[7]||(e[7]=$(M=>d.value=null,["stop"]))})):_("",!0)]))],2)]),t("div",ms,[e[133]||(e[133]=t("label",null,"è¾“å…¥ä»·æ ¼(å…ƒ/M)",-1)),t("input",{type:"number",class:"form-input",value:l.price_in??0,onInput:M=>W(s,"price_in",parseFloat(M.target.value)),step:"0.1",min:"0"},null,40,_s)]),t("div",fs,[e[134]||(e[134]=t("label",null,"è¾“å‡ºä»·æ ¼(å…ƒ/M)",-1)),t("input",{type:"number",class:"form-input",value:l.price_out??0,onInput:M=>W(s,"price_out",parseFloat(M.target.value)),step:"0.1",min:"0"},null,40,ys)])]),t("div",bs,[t("button",{class:C(["test-model-btn",{testing:pe.value[l.name||""],success:((f=z.value[l.name||""])==null?void 0:f.connected)===!0,error:((j=z.value[l.name||""])==null?void 0:j.connected)===!1}]),onClick:$(M=>ut(l.name||""),["stop"]),disabled:!l.name||pe.value[l.name||""],title:rt(l.name||"")},[pe.value[l.name||""]?(o(),I(i(u),{key:0,icon:"lucide:loader-2",class:"spinning"})):((g=z.value[l.name||""])==null?void 0:g.connected)===!0?(o(),I(i(u),{key:1,icon:"lucide:check-circle"})):((J=z.value[l.name||""])==null?void 0:J.connected)===!1?(o(),I(i(u),{key:2,icon:"lucide:x-circle"})):(o(),I(i(u),{key:3,icon:"lucide:play-circle"})),t("span",null,y(dt(l.name||"")),1)],10,gs),z.value[l.name||""]?(o(),r("div",ks,[(De=z.value[l.name||""])!=null&&De.connected?(o(),r("div",ws,[a(i(u),{icon:"lucide:check-circle-2"}),t("span",null,"è¿žæŽ¥æˆåŠŸ Â· å“åº”æ—¶é—´: "+y((Le=(Oe=z.value[l.name||""])==null?void 0:Oe.response_time)==null?void 0:Le.toFixed(2))+"s",1),(je=z.value[l.name||""])!=null&&je.response_text?(o(),r("span",Cs,' "'+y((Be=z.value[l.name||""])==null?void 0:Be.response_text)+'" ',1)):_("",!0)])):(o(),r("div",hs,[a(i(u),{icon:"lucide:alert-circle"}),t("span",null,"è¿žæŽ¥å¤±è´¥: "+y((ze=z.value[l.name||""])==null?void 0:ze.error),1)]))])):_("",!0)]),t("div",$s,[t("div",{class:"advanced-header",onClick:M=>fe(s)},[e[135]||(e[135]=t("span",null,"é«˜çº§é€‰é¡¹",-1)),a(i(u),{icon:K.value[s]?"lucide:chevron-up":"lucide:chevron-down"},null,8,["icon"])],8,Ms),a(N,{name:"slide"},{default:R(()=>[K.value[s]?(o(),r("div",xs,[t("div",Is,[t("div",{class:"toggle-item",onClick:M=>W(s,"force_stream_mode",!l.force_stream_mode)},[t("div",Vs,[a(i(u),{icon:"lucide:radio"}),e[136]||(e[136]=t("div",null,[t("span",{class:"toggle-label"},"å¼ºåˆ¶æµå¼"),t("span",{class:"toggle-hint"},"æ¨¡åž‹ä¸æ”¯æŒéžæµå¼æ—¶å¯ç”¨")],-1))]),t("label",{class:"switch",onClick:e[8]||(e[8]=$(()=>{},["stop"]))},[t("input",{type:"checkbox",checked:!!l.force_stream_mode,onChange:M=>W(s,"force_stream_mode",M.target.checked)},null,40,Ps),e[137]||(e[137]=t("span",{class:"slider"},null,-1))])],8,As),t("div",{class:"toggle-item",onClick:M=>W(s,"anti_truncation",!l.anti_truncation)},[t("div",Ts,[a(i(u),{icon:"lucide:shield-check"}),e[138]||(e[138]=t("div",null,[t("span",{class:"toggle-label"},"é˜²æˆªæ–­"),t("span",{class:"toggle-hint"},"è¾“å‡ºä¸å®Œæ•´æ—¶è‡ªåŠ¨é‡è¯•")],-1))]),t("label",{class:"switch",onClick:e[9]||(e[9]=$(()=>{},["stop"]))},[t("input",{type:"checkbox",checked:!!l.anti_truncation,onChange:M=>W(s,"anti_truncation",M.target.checked)},null,40,Us),e[139]||(e[139]=t("span",{class:"slider"},null,-1))])],8,Ss),t("div",{class:"toggle-item",onClick:M=>W(s,"enable_prompt_perturbation",!l.enable_prompt_perturbation)},[t("div",Ds,[a(i(u),{icon:"lucide:shuffle"}),e[140]||(e[140]=t("div",null,[t("span",{class:"toggle-label"},"æç¤ºè¯æ‰°åŠ¨"),t("span",{class:"toggle-hint"},"æ•´åˆå†…å®¹æ··æ·†å’Œæ³¨æ„åŠ›ä¼˜åŒ–")],-1))]),t("label",{class:"switch",onClick:e[10]||(e[10]=$(()=>{},["stop"]))},[t("input",{type:"checkbox",checked:!!l.enable_prompt_perturbation,onChange:M=>W(s,"enable_prompt_perturbation",M.target.checked)},null,40,Os),e[141]||(e[141]=t("span",{class:"slider"},null,-1))])],8,Es),l.enable_prompt_perturbation?(o(),r("div",Ls,[t("div",js,[e[145]||(e[145]=t("label",null,"æ‰°åŠ¨å¼ºåº¦",-1)),t("div",{class:C(["custom-select",{open:d.value===`model-perturbation-${s}`}])},[t("div",{class:"select-trigger",onClick:$(M=>A(`model-perturbation-${s}`,M),["stop"])},[t("span",null,y({light:"è½»åº¦",medium:"ä¸­åº¦",heavy:"é‡åº¦"}[l.perturbation_strength]||"è½»åº¦"),1),a(i(u),{icon:"lucide:chevron-down",class:C(["chevron",{rotated:d.value===`model-perturbation-${s}`}])},null,8,["class"])],8,Bs),(o(),I(O,{to:"body"},[a(N,{name:"dropdown-fade"},{default:R(()=>[d.value===`model-perturbation-${s}`?(o(),r("div",{key:0,class:"select-options",style:ie(m.value)},[t("div",{class:"select-option",onClick:M=>{W(s,"perturbation_strength","light"),d.value=null}},[...e[142]||(e[142]=[t("span",null,"è½»åº¦",-1)])],8,zs),t("div",{class:"select-option",onClick:M=>{W(s,"perturbation_strength","medium"),d.value=null}},[...e[143]||(e[143]=[t("span",null,"ä¸­åº¦",-1)])],8,Fs),t("div",{class:"select-option",onClick:M=>{W(s,"perturbation_strength","heavy"),d.value=null}},[...e[144]||(e[144]=[t("span",null,"é‡åº¦",-1)])],8,Ws)],4)):_("",!0)]),_:2},1024)])),(o(),I(O,{to:"body"},[d.value===`model-perturbation-${s}`?(o(),r("div",{key:0,class:"dropdown-overlay",onClick:e[11]||(e[11]=$(M=>d.value=null,["stop"]))})):_("",!0)]))],2)]),t("div",Js,[e[147]||(e[147]=t("div",{class:"toggle-info"},[t("span",{class:"toggle-label"},"è¯­ä¹‰å˜ä½“")],-1)),t("label",{class:"switch small",onClick:e[12]||(e[12]=$(()=>{},["stop"]))},[t("input",{type:"checkbox",checked:!!l.enable_semantic_variants,onChange:M=>W(s,"enable_semantic_variants",M.target.checked)},null,40,Rs),e[146]||(e[146]=t("span",{class:"slider"},null,-1))])])])):_("",!0),a(Re,{"model-value":l.extra_params,"onUpdate:modelValue":M=>W(s,"extra_params",M)},null,8,["model-value","onUpdate:modelValue"])])])):_("",!0)]),_:2},1024)])])):_("",!0)]}),_:2},1024)],2))),128))]))],512),[[Ce,V.value==="models"]]),U(t("div",Ns,[t("div",qs,[t("div",Gs,[t("div",Qs,[t("div",Hs,[a(i(u),{icon:"lucide:gauge"})]),e[148]||(e[148]=t("div",{class:"section-info"},[t("h3",null,"è´Ÿè½½å‡è¡¡é…ç½®"),t("p",null,"è°ƒæ•´æ¨¡åž‹é€‰æ‹©å™¨çš„è´Ÿè½½å‡è¡¡ç­–ç•¥å’Œæƒ©ç½šæœºåˆ¶")],-1))]),t("div",Xs,[t("div",Ys,[t("label",null,[e[149]||(e[149]=x(" ä¸¥é‡é”™è¯¯æƒ©ç½šä¹˜æ•° ",-1)),t("span",Zs,[a(i(u),{icon:"lucide:help-circle"})])]),t("div",Ks,[t("button",{class:"number-btn",onClick:e[13]||(e[13]=l=>H("critical_penalty_multiplier",Math.max(0,(c.value.critical_penalty_multiplier??5)-.5))),disabled:(c.value.critical_penalty_multiplier??5)<=0},[a(i(u),{icon:"lucide:minus"})],8,en),t("input",{type:"number",class:"form-input number-center",value:c.value.critical_penalty_multiplier??5,onInput:e[14]||(e[14]=l=>H("critical_penalty_multiplier",parseFloat(l.target.value))),min:"0",max:"20",step:"0.5"},null,40,tn),t("button",{class:"number-btn",onClick:e[15]||(e[15]=l=>H("critical_penalty_multiplier",Math.min(20,(c.value.critical_penalty_multiplier??5)+.5))),disabled:(c.value.critical_penalty_multiplier??5)>=20},[a(i(u),{icon:"lucide:plus"})],8,ln)]),e[150]||(e[150]=t("p",{class:"field-hint"},"å½“æ¨¡åž‹å‘ç”Ÿä¸¥é‡é”™è¯¯æ—¶ï¼Œå…¶å¤±è´¥æƒ©ç½šå€¼ä¼šä¹˜ä»¥æ­¤å€æ•°ï¼ˆæŽ¨è: 3.0-10.0ï¼‰",-1))]),t("div",sn,[t("label",null,[e[151]||(e[151]=x(" é»˜è®¤æƒ©ç½šå¢žé‡ ",-1)),t("span",nn,[a(i(u),{icon:"lucide:help-circle"})])]),t("div",on,[t("button",{class:"number-btn",onClick:e[16]||(e[16]=l=>H("default_penalty_increment",Math.max(0,(c.value.default_penalty_increment??1)-.1))),disabled:(c.value.default_penalty_increment??1)<=0},[a(i(u),{icon:"lucide:minus"})],8,an),t("input",{type:"number",class:"form-input number-center",value:c.value.default_penalty_increment??1,onInput:e[17]||(e[17]=l=>H("default_penalty_increment",parseFloat(l.target.value))),min:"0",max:"5",step:"0.1"},null,40,un),t("button",{class:"number-btn",onClick:e[18]||(e[18]=l=>H("default_penalty_increment",Math.min(5,(c.value.default_penalty_increment??1)+.1))),disabled:(c.value.default_penalty_increment??1)>=5},[a(i(u),{icon:"lucide:plus"})],8,rn)]),e[152]||(e[152]=t("p",{class:"field-hint"},"å½“æ¨¡åž‹å‘ç”Ÿä¸€èˆ¬é”™è¯¯æ—¶ï¼Œå…¶å¤±è´¥æƒ©ç½šå€¼ä¼šå¢žåŠ æ­¤æ•°å€¼ï¼ˆæŽ¨è: 0.5-2.0ï¼‰",-1))]),t("div",dn,[t("label",null,[e[153]||(e[153]=x(" å»¶è¿Ÿæƒé‡ ",-1)),t("span",cn,[a(i(u),{icon:"lucide:help-circle"})])]),t("div",vn,[t("button",{class:"number-btn",onClick:e[19]||(e[19]=l=>H("latency_weight",Math.max(0,(c.value.latency_weight??200)-10))),disabled:(c.value.latency_weight??200)<=0},[a(i(u),{icon:"lucide:minus"})],8,pn),t("input",{type:"number",class:"form-input number-center",value:c.value.latency_weight??200,onInput:e[20]||(e[20]=l=>H("latency_weight",parseFloat(l.target.value))),min:"0",max:"1000",step:"10"},null,40,mn),t("button",{class:"number-btn",onClick:e[21]||(e[21]=l=>H("latency_weight",Math.min(1e3,(c.value.latency_weight??200)+10))),disabled:(c.value.latency_weight??200)>=1e3},[a(i(u),{icon:"lucide:plus"})],8,_n)]),e[154]||(e[154]=t("p",{class:"field-hint"},"æƒé‡è¶Šé«˜ï¼Œé€‰æ‹©å™¨è¶Šå€¾å‘äºŽé€‰æ‹©ä½Žå»¶è¿Ÿæ¨¡åž‹ï¼ˆæŽ¨è: 50-500ï¼‰",-1))]),t("div",fn,[t("label",null,[e[155]||(e[155]=x(" å¤±è´¥æƒ©ç½šæƒé‡ ",-1)),t("span",yn,[a(i(u),{icon:"lucide:help-circle"})])]),t("div",bn,[t("button",{class:"number-btn",onClick:e[22]||(e[22]=l=>H("penalty_weight",Math.max(0,(c.value.penalty_weight??300)-10))),disabled:(c.value.penalty_weight??300)<=0},[a(i(u),{icon:"lucide:minus"})],8,gn),t("input",{type:"number",class:"form-input number-center",value:c.value.penalty_weight??300,onInput:e[23]||(e[23]=l=>H("penalty_weight",parseFloat(l.target.value))),min:"0",max:"1000",step:"10"},null,40,kn),t("button",{class:"number-btn",onClick:e[24]||(e[24]=l=>H("penalty_weight",Math.min(1e3,(c.value.penalty_weight??300)+10))),disabled:(c.value.penalty_weight??300)>=1e3},[a(i(u),{icon:"lucide:plus"})],8,wn)]),e[156]||(e[156]=t("p",{class:"field-hint"},"æƒé‡è¶Šé«˜ï¼Œæœ‰å¤±è´¥è®°å½•çš„æ¨¡åž‹è¶Šéš¾è¢«é€‰ä¸­ï¼ˆæŽ¨è: 100-500ï¼‰",-1))]),t("div",Cn,[t("label",null,[e[157]||(e[157]=x(" ä½¿ç”¨æƒ©ç½šæƒé‡ ",-1)),t("span",hn,[a(i(u),{icon:"lucide:help-circle"})])]),t("div",$n,[t("button",{class:"number-btn",onClick:e[25]||(e[25]=l=>H("usage_penalty_weight",Math.max(0,(c.value.usage_penalty_weight??1e3)-50))),disabled:(c.value.usage_penalty_weight??1e3)<=0},[a(i(u),{icon:"lucide:minus"})],8,Mn),t("input",{type:"number",class:"form-input number-center",value:c.value.usage_penalty_weight??1e3,onInput:e[26]||(e[26]=l=>H("usage_penalty_weight",parseFloat(l.target.value))),min:"0",max:"3000",step:"50"},null,40,xn),t("button",{class:"number-btn",onClick:e[27]||(e[27]=l=>H("usage_penalty_weight",Math.min(3e3,(c.value.usage_penalty_weight??1e3)+50))),disabled:(c.value.usage_penalty_weight??1e3)>=3e3},[a(i(u),{icon:"lucide:plus"})],8,In)]),e[158]||(e[158]=t("p",{class:"field-hint"},"æƒé‡è¶Šé«˜ï¼Œè´Ÿè½½å‡è¡¡è¶Šå‡åŒ€ï¼ˆè½®è¯¢æ‰€æœ‰æ¨¡åž‹ï¼‰ï¼ˆæŽ¨è: 500-2000ï¼‰",-1))])]),t("div",An,[e[164]||(e[164]=t("h4",null,"å¿«é€Ÿé¢„è®¾",-1)),e[165]||(e[165]=t("p",{class:"section-desc"},"ä¸€é”®åº”ç”¨å¸¸è§åœºæ™¯çš„ä¼˜åŒ–é…ç½®",-1)),t("div",Vn,[t("button",{class:"preset-card",onClick:e[28]||(e[28]=l=>ke("production"))},[t("div",Pn,[a(i(u),{icon:"lucide:shield-check"})]),e[159]||(e[159]=t("div",{class:"preset-info"},[t("h5",null,"ç”Ÿäº§çŽ¯å¢ƒ"),t("p",null,"ç¨³å®šæ€§ä¼˜å…ˆ")],-1))]),t("button",{class:"preset-card",onClick:e[29]||(e[29]=l=>ke("realtime"))},[t("div",Sn,[a(i(u),{icon:"lucide:zap"})]),e[160]||(e[160]=t("div",{class:"preset-info"},[t("h5",null,"å®žæ—¶äº¤äº’"),t("p",null,"å“åº”é€Ÿåº¦ä¼˜å…ˆ")],-1))]),t("button",{class:"preset-card",onClick:e[30]||(e[30]=l=>ke("development"))},[t("div",Tn,[a(i(u),{icon:"lucide:code"})]),e[161]||(e[161]=t("div",{class:"preset-info"},[t("h5",null,"å¼€å‘æµ‹è¯•"),t("p",null,"å¿«é€Ÿè¯•é”™")],-1))]),t("button",{class:"preset-card",onClick:e[31]||(e[31]=l=>ke("batch"))},[t("div",Un,[a(i(u),{icon:"lucide:layers"})]),e[162]||(e[162]=t("div",{class:"preset-info"},[t("h5",null,"æ‰¹é‡å¤„ç†"),t("p",null,"æˆæœ¬ä¼˜å…ˆ")],-1))]),t("button",{class:"preset-card",onClick:e[32]||(e[32]=l=>ke("performance"))},[t("div",En,[a(i(u),{icon:"lucide:rocket"})]),e[163]||(e[163]=t("div",{class:"preset-info"},[t("h5",null,"æ€§èƒ½ä¼˜å…ˆ"),t("p",null,"å•æ¨¡åž‹ä¼˜åŒ–")],-1))])])])])])],512),[[Ce,V.value==="selector"]]),U(t("div",Dn,[t("div",On,[(o(),r(X,null,te(ae,l=>t("button",{key:l.key,class:C(["category-btn",{active:T.value===l.key}]),onClick:s=>T.value=l.key},[a(i(u),{icon:l.icon},null,8,["icon"]),t("span",null,y(l.name),1)],10,Ln)),64))]),t("div",jn,[(o(!0),r(X,null,te(se.value,(l,s)=>(o(),r("div",{key:s,class:"task-item"},[t("div",Bn,[t("div",zn,[t("span",Fn,y(l.name),1),t("span",Wn,y(l.description),1)])]),t("div",Jn,[t("div",Rn,[t("div",Nn,[e[166]||(e[166]=t("label",null,"æ¨¡åž‹ (å¯å¤šé€‰)",-1)),t("div",{class:C(["custom-select",{open:ue.value===s}])},[t("div",{class:"select-trigger",onClick:f=>et(s,f)},[we(s).length===0?(o(),r("span",Gn,"æœªé…ç½®")):(o(),r("div",Qn,[(o(!0),r(X,null,te(we(s),f=>(o(),r("span",{key:f,class:"selected-tag"},y(f),1))),128))])),a(i(u),{icon:"lucide:chevron-down",class:C(["chevron",{rotated:ue.value===s}])},null,8,["class"])],8,qn),(o(),I(O,{to:"body"},[a(N,{name:"dropdown-fade"},{default:R(()=>[ue.value===s?(o(),r("div",{key:0,class:"select-options",style:ie(m.value)},[(o(!0),r(X,null,te(k.value,f=>(o(),r("div",{key:f.name,class:"select-option",onClick:$(j=>tt(s,f.name),["stop"])},[t("div",{class:C(["checkbox",{checked:we(s).includes(f.name)}])},[we(s).includes(f.name)?(o(),I(i(u),{key:0,icon:"lucide:check"})):_("",!0)],2),t("span",null,y(f.name),1)],8,Hn))),128))],4)):_("",!0)]),_:2},1024)]))],2),(o(),I(O,{to:"body"},[ue.value===s?(o(),r("div",{key:0,class:"dropdown-overlay",onClick:e[33]||(e[33]=f=>ue.value=null)})):_("",!0)]))]),t("div",Xn,[e[167]||(e[167]=t("label",null,"æ¸©åº¦",-1)),t("input",{type:"number",class:"form-input",value:lt(s),onInput:f=>st(s,parseFloat(f.target.value)),step:"0.1",min:"0",max:"2",placeholder:"0.7"},null,40,Yn)]),t("div",Zn,[e[168]||(e[168]=t("label",null,"æœ€å¤§Token",-1)),t("input",{type:"number",class:"form-input",value:nt(s),onInput:f=>ot(s,parseInt(f.target.value)),min:"1",placeholder:"800"},null,40,Kn)]),t("div",eo,[e[169]||(e[169]=t("label",null,"å¹¶å‘",-1)),t("input",{type:"number",class:"form-input",value:at(s),onInput:f=>it(s,Number(f.target.value)),min:"1",max:"100",placeholder:"1"},null,40,to)])])])]))),128))])],512),[[Ce,V.value==="tasks"]]),(o(),I(O,{to:"body"},[q.value?(o(),r("div",{key:0,class:"modal-overlay",onClick:e[72]||(e[72]=$(l=>q.value=!1,["self"]))},[t("div",lo,[t("div",so,[t("h3",null,[a(i(u),{icon:"lucide:plus-circle"}),e[170]||(e[170]=x(" æ·»åŠ  API æä¾›å•† ",-1))]),t("button",{class:"close-btn",onClick:e[34]||(e[34]=l=>q.value=!1)},[a(i(u),{icon:"lucide:x"})])]),t("div",no,[t("div",oo,[e[172]||(e[172]=t("label",null,"æä¾›å•†æ¨¡æ¿",-1)),t("div",{class:C(["searchable-select",{open:d.value==="preset-provider-select"}])},[t("div",{class:"select-trigger-with-search",onClick:e[35]||(e[35]=$(l=>A("preset-provider-select",l),["stop"]))},[Z.value?(o(),I(i(u),{key:0,icon:Z.value.icon,class:"preset-icon"},null,8,["icon"])):_("",!0),t("span",null,y(Z.value?Z.value.name:"é€‰æ‹©é¢„è®¾æ¨¡æ¿"),1),Z.value?(o(),r("small",ao,y(Z.value.description),1)):_("",!0),a(i(u),{icon:"lucide:chevron-down",class:C(["chevron",{rotated:d.value==="preset-provider-select"}])},null,8,["class"])]),(o(),I(O,{to:"body"},[a(N,{name:"dropdown-fade"},{default:R(()=>[d.value==="preset-provider-select"?(o(),r("div",{key:0,class:"select-options searchable",style:ie(m.value),onClick:e[41]||(e[41]=$(()=>{},["stop"])),onMousedown:e[42]||(e[42]=$(()=>{},["stop"]))},[t("div",{class:"search-in-dropdown",onMousedown:e[39]||(e[39]=$(()=>{},["stop"]))},[a(i(u),{icon:"lucide:search"}),U(t("input",{type:"text","onUpdate:modelValue":e[36]||(e[36]=l=>re.value=l),placeholder:"æœç´¢æä¾›å•†...",class:"dropdown-search-input",onClick:e[37]||(e[37]=$(()=>{},["stop"])),onMousedown:e[38]||(e[38]=$(()=>{},["stop"]))},null,544),[[F,re.value]])],32),t("div",{class:"options-list",onMousedown:e[40]||(e[40]=$(()=>{},["stop"]))},[(o(!0),r(X,null,te($e.value,l=>{var s,f;return o(),r("div",{key:l.name,class:C(["select-option with-icon",{selected:((s=Z.value)==null?void 0:s.name)===l.name}]),onClick:j=>{Qe(l),d.value=null}},[a(i(u),{icon:l.icon,class:"option-icon"},null,8,["icon"]),t("div",uo,[t("span",ro,y(l.name),1),t("small",co,y(l.description),1)]),((f=Z.value)==null?void 0:f.name)===l.name?(o(),I(i(u),{key:0,icon:"lucide:check",class:"check-icon"})):_("",!0)],10,io)}),128)),$e.value.length===0?(o(),r("div",vo,[a(i(u),{icon:"lucide:search-x"}),e[171]||(e[171]=t("span",null,"æ— åŒ¹é…ç»“æžœ",-1))])):_("",!0)],32)],36)):_("",!0)]),_:1})])),(o(),I(O,{to:"body"},[d.value==="preset-provider-select"?(o(),r("div",{key:0,class:"dropdown-overlay",onClick:e[43]||(e[43]=$(l=>d.value=null,["stop"]))})):_("",!0)]))],2),e[173]||(e[173]=t("p",{class:"field-tip"},"é€‰æ‹©é¢„è®¾æ¨¡æ¿å¯è‡ªåŠ¨å¡«å…… URL å’Œå®¢æˆ·ç«¯ç±»åž‹ï¼Œæ”¯æŒæœç´¢",-1))]),e[198]||(e[198]=t("div",{class:"divider"},[t("span",null,"é…ç½®è¯¦æƒ…")],-1)),t("div",po,[t("div",mo,[e[174]||(e[174]=t("label",null,"æä¾›å•†åç§°",-1)),U(t("input",{"onUpdate:modelValue":e[44]||(e[44]=l=>v.value.name=l),type:"text",class:"input",placeholder:"ä¾‹å¦‚: DeepSeek"},null,512),[[F,v.value.name]])]),v.value.client_type!=="bedrock"?(o(),r("div",_o,[t("label",null,[e[176]||(e[176]=x(" API åœ°å€ ",-1)),ee.value?(o(),r("span",fo,[a(i(u),{icon:"lucide:lock"}),e[175]||(e[175]=x(" ç”±æ¨¡æ¿æŒ‡å®š",-1))])):_("",!0)]),U(t("input",{"onUpdate:modelValue":e[45]||(e[45]=l=>v.value.base_url=l),type:"text",class:C(["input",{disabled:ee.value}]),disabled:ee.value,placeholder:"https://api.example.com/v1"},null,10,yo),[[F,v.value.base_url]])])):_("",!0),t("div",bo,[t("label",null,[x(y(v.value.client_type==="bedrock"?"AWS Access Key ID":"API å¯†é’¥")+" ",1),e[177]||(e[177]=t("span",{class:"field-hint"},"æ”¯æŒå¤šè¡Œé…ç½®ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨è½®è¯¢",-1))]),a(i(We),{value:Array.isArray(v.value.api_key)?v.value.api_key:v.value.api_key?[String(v.value.api_key)]:[],onUpdate:e[46]||(e[46]=l=>v.value.api_key=l),placeholder:v.value.client_type==="bedrock"?"ä½ çš„ AWS Access Key ID":"ä½ çš„ API å¯†é’¥","add-button-text":"æ·»åŠ å¤‡ç”¨å¯†é’¥","empty-text":"è¯·æ·»åŠ è‡³å°‘ä¸€ä¸ª API å¯†é’¥","is-secret":!0},null,8,["value","placeholder"])]),t("div",go,[t("label",null,[e[179]||(e[179]=x(" å®¢æˆ·ç«¯ç±»åž‹ ",-1)),ee.value?(o(),r("span",ko,[a(i(u),{icon:"lucide:lock"}),e[178]||(e[178]=x(" ç”±æ¨¡æ¿æŒ‡å®š",-1))])):_("",!0)]),t("div",{class:C(["custom-select",{open:d.value==="new-provider-client",disabled:ee.value}])},[t("div",{class:C(["select-trigger",{disabled:ee.value}]),onClick:e[47]||(e[47]=$(l=>!ee.value&&A("new-provider-client",l),["stop"]))},[t("span",null,y(Ve(v.value.client_type)),1),a(i(u),{icon:"lucide:chevron-down",class:C(["chevron",{rotated:d.value==="new-provider-client"}])},null,8,["class"])],2),(o(),I(O,{to:"body"},[a(N,{name:"dropdown-fade"},{default:R(()=>[d.value==="new-provider-client"&&!ee.value?(o(),r("div",{key:0,class:"select-options",style:ie(m.value)},[t("div",{class:"select-option",onClick:e[48]||(e[48]=l=>{v.value.client_type="openai",d.value=null})},[...e[180]||(e[180]=[t("span",null,"OpenAI å…¼å®¹",-1)])]),t("div",{class:"select-option",onClick:e[49]||(e[49]=l=>{v.value.client_type="aiohttp_gemini",d.value=null})},[...e[181]||(e[181]=[t("span",null,"Geminiï¼ˆGoogleï¼‰",-1)])]),t("div",{class:"select-option",onClick:e[50]||(e[50]=l=>{v.value.client_type="bedrock",d.value=null})},[...e[182]||(e[182]=[t("span",null,"AWS Bedrock",-1)])])],4)):_("",!0)]),_:1})])),(o(),I(O,{to:"body"},[d.value==="new-provider-client"?(o(),r("div",{key:0,class:"dropdown-overlay",onClick:e[51]||(e[51]=$(l=>d.value=null,["stop"]))})):_("",!0)]))],2)]),v.value.client_type==="bedrock"?(o(),r(X,{key:1},[t("div",wo,[e[183]||(e[183]=t("label",null,[x(" AWS Secret Key "),t("span",{class:"field-hint"},"IAM è§’è‰²æ¨¡å¼ä¸‹å¯ç•™ç©º")],-1)),U(t("input",{"onUpdate:modelValue":e[52]||(e[52]=l=>v.value.aws_secret_key=l),type:"password",class:"input",placeholder:"ä½ çš„ AWS Secret Access Key"},null,512),[[F,v.value.aws_secret_key]])]),t("div",Co,[e[190]||(e[190]=t("label",null,"AWS åŒºåŸŸ",-1)),t("div",{class:C(["custom-select",{open:d.value==="new-provider-region"}])},[t("div",{class:"select-trigger",onClick:e[53]||(e[53]=$(l=>A("new-provider-region",l),["stop"]))},[t("span",null,y(v.value.aws_region||"us-east-1"),1),a(i(u),{icon:"lucide:chevron-down",class:C(["chevron",{rotated:d.value==="new-provider-region"}])},null,8,["class"])]),(o(),I(O,{to:"body"},[a(N,{name:"dropdown-fade"},{default:R(()=>[d.value==="new-provider-region"?(o(),r("div",{key:0,class:"select-options",style:ie(m.value)},[t("div",{class:"select-option",onClick:e[54]||(e[54]=l=>{v.value.aws_region="us-east-1",d.value=null})},[...e[184]||(e[184]=[t("span",null,"us-east-1 (å¼—å‰å°¼äºšåŒ—éƒ¨)",-1)])]),t("div",{class:"select-option",onClick:e[55]||(e[55]=l=>{v.value.aws_region="us-west-2",d.value=null})},[...e[185]||(e[185]=[t("span",null,"us-west-2 (ä¿„å‹’å†ˆ)",-1)])]),t("div",{class:"select-option",onClick:e[56]||(e[56]=l=>{v.value.aws_region="eu-central-1",d.value=null})},[...e[186]||(e[186]=[t("span",null,"eu-central-1 (æ³•å…°å…‹ç¦)",-1)])]),t("div",{class:"select-option",onClick:e[57]||(e[57]=l=>{v.value.aws_region="eu-west-1",d.value=null})},[...e[187]||(e[187]=[t("span",null,"eu-west-1 (çˆ±å°”å…°)",-1)])]),t("div",{class:"select-option",onClick:e[58]||(e[58]=l=>{v.value.aws_region="ap-southeast-1",d.value=null})},[...e[188]||(e[188]=[t("span",null,"ap-southeast-1 (æ–°åŠ å¡)",-1)])]),t("div",{class:"select-option",onClick:e[59]||(e[59]=l=>{v.value.aws_region="ap-northeast-1",d.value=null})},[...e[189]||(e[189]=[t("span",null,"ap-northeast-1 (ä¸œäº¬)",-1)])])],4)):_("",!0)]),_:1})])),(o(),I(O,{to:"body"},[d.value==="new-provider-region"?(o(),r("div",{key:0,class:"dropdown-overlay",onClick:e[60]||(e[60]=$(l=>d.value=null,["stop"]))})):_("",!0)]))],2)])],64)):_("",!0),t("div",ho,[t("div",{class:"advanced-toggle",onClick:e[61]||(e[61]=l=>ce.value=!ce.value)},[a(i(u),{icon:ce.value?"lucide:chevron-up":"lucide:chevron-down"},null,8,["icon"]),e[191]||(e[191]=t("span",null,"é«˜çº§è®¾ç½®",-1))]),a(N,{name:"slide"},{default:R(()=>[ce.value?(o(),r("div",$o,[t("div",Mo,[t("div",xo,[e[192]||(e[192]=t("label",null,"æœ€å¤§é‡è¯•æ¬¡æ•°",-1)),t("div",Io,[t("button",{class:"number-btn",onClick:e[62]||(e[62]=l=>v.value.max_retry=Math.max(0,(v.value.max_retry??2)-1)),disabled:(v.value.max_retry??2)<=0},[a(i(u),{icon:"lucide:minus"})],8,Ao),U(t("input",{type:"number",class:"form-input number-center","onUpdate:modelValue":e[63]||(e[63]=l=>v.value.max_retry=l),min:"0",max:"10",placeholder:"2"},null,512),[[F,v.value.max_retry,void 0,{number:!0}]]),t("button",{class:"number-btn",onClick:e[64]||(e[64]=l=>v.value.max_retry=Math.min(10,(v.value.max_retry??2)+1)),disabled:(v.value.max_retry??2)>=10},[a(i(u),{icon:"lucide:plus"})],8,Vo)]),e[193]||(e[193]=t("p",{class:"field-hint"},"è¯·æ±‚å¤±è´¥æ—¶çš„æœ€å¤§é‡è¯•æ¬¡æ•°",-1))]),t("div",Po,[e[194]||(e[194]=t("label",null,"è¶…æ—¶æ—¶é—´(ç§’)",-1)),t("div",So,[t("button",{class:"number-btn",onClick:e[65]||(e[65]=l=>v.value.timeout=Math.max(5,(v.value.timeout??30)-5)),disabled:(v.value.timeout??30)<=5},[a(i(u),{icon:"lucide:minus"})],8,To),U(t("input",{type:"number",class:"form-input number-center","onUpdate:modelValue":e[66]||(e[66]=l=>v.value.timeout=l),min:"5",max:"300",step:"5",placeholder:"30"},null,512),[[F,v.value.timeout,void 0,{number:!0}]]),t("button",{class:"number-btn",onClick:e[67]||(e[67]=l=>v.value.timeout=Math.min(300,(v.value.timeout??30)+5)),disabled:(v.value.timeout??30)>=300},[a(i(u),{icon:"lucide:plus"})],8,Uo)]),e[195]||(e[195]=t("p",{class:"field-hint"},"å•æ¬¡è¯·æ±‚çš„è¶…æ—¶æ—¶é—´",-1))])]),t("div",Eo,[t("div",Do,[e[196]||(e[196]=t("label",null,"é‡è¯•é—´éš”(ç§’)",-1)),t("div",Oo,[t("button",{class:"number-btn",onClick:e[68]||(e[68]=l=>v.value.retry_interval=Math.max(1,(v.value.retry_interval??10)-1)),disabled:(v.value.retry_interval??10)<=1},[a(i(u),{icon:"lucide:minus"})],8,Lo),U(t("input",{type:"number",class:"form-input number-center","onUpdate:modelValue":e[69]||(e[69]=l=>v.value.retry_interval=l),min:"1",max:"60",placeholder:"10"},null,512),[[F,v.value.retry_interval,void 0,{number:!0}]]),t("button",{class:"number-btn",onClick:e[70]||(e[70]=l=>v.value.retry_interval=Math.min(60,(v.value.retry_interval??10)+1)),disabled:(v.value.retry_interval??10)>=60},[a(i(u),{icon:"lucide:plus"})],8,jo)]),e[197]||(e[197]=t("p",{class:"field-hint"},"é‡è¯•ä¹‹é—´çš„ç­‰å¾…æ—¶é—´",-1))])])])):_("",!0)]),_:1})])])]),t("div",Bo,[t("button",{class:"btn btn-secondary",onClick:e[71]||(e[71]=l=>q.value=!1)},"å–æ¶ˆ"),t("button",{class:"btn btn-primary",onClick:He,disabled:!v.value.name||v.value.client_type!=="bedrock"&&!v.value.base_url},[a(i(u),{icon:"lucide:check"}),e[199]||(e[199]=x(" æ·»åŠ  ",-1))],8,zo)])])])):_("",!0)])),(o(),I(O,{to:"body"},[Y.value?(o(),r("div",{key:0,class:"modal-overlay",onClick:e[103]||(e[103]=$(l=>Y.value=!1,["self"]))},[t("div",Fo,[t("div",Wo,[t("h3",null,[a(i(u),{icon:"lucide:bot"}),e[200]||(e[200]=x(" æ·»åŠ æ¨¡åž‹ ",-1))]),t("button",{class:"close-btn",onClick:e[73]||(e[73]=l=>Y.value=!1)},[a(i(u),{icon:"lucide:x"})])]),t("div",Jo,[t("div",Ro,[e[201]||(e[201]=t("label",null,[x(" æ¨¡åž‹æ ‡è¯†ç¬¦ "),t("span",{class:"field-hint"},"API æœåŠ¡å•†æä¾›çš„æ¨¡åž‹æ ‡è¯†ç¬¦")],-1)),t("div",No,[U(t("input",{"onUpdate:modelValue":e[74]||(e[74]=l=>p.value.model_identifier=l),type:"text",class:"input",placeholder:"ä¾‹å¦‚: deepseek-chat, gpt-4",style:{flex:"1"}},null,512),[[F,p.value.model_identifier]])])]),t("div",qo,[e[202]||(e[202]=t("label",null,[x(" æ¨¡åž‹åç§° "),t("span",{class:"field-hint"},"æ¨¡åž‹çš„è‡ªå®šä¹‰åç§°ï¼Œåœ¨ä»»åŠ¡é…ç½®ä¸­ä½¿ç”¨")],-1)),U(t("input",{"onUpdate:modelValue":e[75]||(e[75]=l=>p.value.name=l),type:"text",class:"input",placeholder:"ä¾‹å¦‚: deepseek-v3"},null,512),[[F,p.value.name]])]),t("div",Go,[e[204]||(e[204]=t("label",null,"API æä¾›å•†",-1)),t("div",{class:C(["custom-select",{open:d.value==="new-model-provider"}])},[t("div",{class:"select-trigger",onClick:e[76]||(e[76]=$(l=>A("new-model-provider",l),["stop"]))},[t("span",null,y(p.value.api_provider||"è¯·é€‰æ‹©æä¾›å•†"),1),a(i(u),{icon:"lucide:chevron-down",class:C(["chevron",{rotated:d.value==="new-model-provider"}])},null,8,["class"])]),(o(),I(O,{to:"body"},[a(N,{name:"dropdown-fade"},{default:R(()=>[d.value==="new-model-provider"?(o(),r("div",{key:0,class:"select-options",style:ie(m.value)},[t("div",{class:"select-option",onClick:e[77]||(e[77]=l=>{p.value.api_provider="",Ie(),d.value=null})},[...e[203]||(e[203]=[t("span",null,"è¯·é€‰æ‹©æä¾›å•†",-1)])]),(o(!0),r(X,null,te(E.value,l=>(o(),r("div",{key:l.name,class:"select-option",onClick:s=>{p.value.api_provider=l.name||"",Ie(),d.value=null}},[t("span",null,y(l.name),1)],8,Qo))),128))],4)):_("",!0)]),_:1})])),(o(),I(O,{to:"body"},[d.value==="new-model-provider"?(o(),r("div",{key:0,class:"dropdown-overlay",onClick:e[78]||(e[78]=$(l=>d.value=null,["stop"]))})):_("",!0)]))],2)]),p.value.api_provider&&(xe.value||le.value.length>0||ne.value)?(o(),r("div",Ho,[xe.value?(o(),r("div",Xo,[a(i(u),{icon:"lucide:loader-2",class:"spinning"}),e[205]||(e[205]=t("span",null,"æ­£åœ¨èŽ·å–å¯ç”¨æ¨¡åž‹...",-1))])):ne.value?(o(),r("div",Yo,[a(i(u),{icon:"lucide:alert-circle"}),t("span",null,y(ne.value),1),t("button",{class:"btn-retry",onClick:Ie},[a(i(u),{icon:"lucide:refresh-cw"}),e[206]||(e[206]=x(" é‡è¯• ",-1))])])):le.value.length>0?(o(),r("div",Zo,[t("div",Ko,[t("span",null,"å¯ç”¨æ¨¡åž‹ ("+y(le.value.length)+")",1),t("button",{class:"btn-refresh",onClick:Ie,title:"åˆ·æ–°åˆ—è¡¨"},[a(i(u),{icon:"lucide:refresh-cw"})])]),t("div",ea,[a(i(u),{icon:"lucide:search"}),U(t("input",{type:"text","onUpdate:modelValue":e[79]||(e[79]=l=>me.value=l),placeholder:"æœç´¢æ¨¡åž‹...",class:"model-search-input"},null,512),[[F,me.value]]),me.value?(o(),r("button",{key:0,class:"clear-model-search",onClick:e[80]||(e[80]=l=>me.value="")},[a(i(u),{icon:"lucide:x"})])):_("",!0)]),t("div",ta,[(o(!0),r(X,null,te(Ee.value,l=>(o(),r("button",{key:l.id,class:C(["model-option",{active:p.value.model_identifier===l.id}]),onClick:s=>{p.value.model_identifier=l.id,p.value.name=l.name}},[a(i(u),{icon:"lucide:bot"}),t("div",sa,[t("span",na,y(l.id),1),l.name!==l.id?(o(),r("span",oa,y(l.name),1)):_("",!0)]),p.value.model_identifier===l.id?(o(),I(i(u),{key:0,icon:"lucide:check",class:"check-icon"})):_("",!0)],10,la))),128)),Ee.value.length===0?(o(),r("div",aa,[a(i(u),{icon:"lucide:search-x"}),e[207]||(e[207]=t("span",null,"æ— åŒ¹é…çš„æ¨¡åž‹",-1))])):_("",!0)])])):_("",!0)])):_("",!0),t("div",ia,[t("div",ua,[e[208]||(e[208]=t("label",null,"è¾“å…¥ä»·æ ¼ (å…ƒ/M token)",-1)),U(t("input",{"onUpdate:modelValue":e[81]||(e[81]=l=>p.value.price_in=l),type:"number",class:"input",step:"0.1",min:"0"},null,512),[[F,p.value.price_in,void 0,{number:!0}]])]),t("div",ra,[e[209]||(e[209]=t("label",null,"è¾“å‡ºä»·æ ¼ (å…ƒ/M token)",-1)),U(t("input",{"onUpdate:modelValue":e[82]||(e[82]=l=>p.value.price_out=l),type:"number",class:"input",step:"0.1",min:"0"},null,512),[[F,p.value.price_out,void 0,{number:!0}]])])]),t("div",da,[t("div",{class:"advanced-header",onClick:e[83]||(e[83]=l=>G.value=!G.value)},[t("div",ca,[a(i(u),{icon:G.value?"lucide:chevron-down":"lucide:chevron-right"},null,8,["icon"]),e[210]||(e[210]=t("span",null,"é«˜çº§å‚æ•° (å¯é€‰)",-1))]),t("span",va,y(G.value?"æ”¶èµ·":"å±•å¼€"),1)]),U(t("div",pa,[t("div",ma,[e[211]||(e[211]=t("label",null,[x(" æœ€å¤§è¾“å‡º Token "),t("span",{class:"field-hint"},"ç•™ç©ºä½¿ç”¨é»˜è®¤å€¼")],-1)),U(t("input",{"onUpdate:modelValue":e[84]||(e[84]=l=>p.value.max_tokens=l),type:"number",class:"input",min:"1",placeholder:"ä¾‹å¦‚: 4096"},null,512),[[F,p.value.max_tokens,void 0,{number:!0}]])]),t("div",_a,[e[212]||(e[212]=t("label",null,[x(" æ¸©åº¦ (temperature) "),t("span",{class:"field-hint"},"0-2ï¼Œç•™ç©ºä½¿ç”¨é»˜è®¤å€¼")],-1)),t("div",fa,[t("input",{type:"range",class:"temp-slider",value:p.value.temperature??.7,onInput:e[85]||(e[85]=l=>p.value.temperature=parseFloat(l.target.value)),min:"0",max:"2",step:"0.1"},null,40,ya),U(t("input",{"onUpdate:modelValue":e[86]||(e[86]=l=>p.value.temperature=l),type:"number",class:"input temp-input",step:"0.1",min:"0",max:"2",placeholder:"0.7"},null,512),[[F,p.value.temperature,void 0,{number:!0}]])])]),t("div",ba,[t("div",{class:"feature-toggle",onClick:e[89]||(e[89]=l=>p.value.anti_truncation=!p.value.anti_truncation)},[t("div",ga,[t("div",{class:C(["feature-toggle-icon",{active:p.value.anti_truncation}])},[a(i(u),{icon:"lucide:shield-check"})],2),e[213]||(e[213]=t("div",{class:"feature-toggle-text"},[t("span",{class:"feature-name"},"åæˆªæ–­"),t("span",{class:"feature-hint"},"é˜²æ­¢æ¨¡åž‹è¾“å‡ºè¢«æˆªæ–­")],-1))]),t("label",{class:"switch small",onClick:e[88]||(e[88]=$(()=>{},["stop"]))},[U(t("input",{type:"checkbox","onUpdate:modelValue":e[87]||(e[87]=l=>p.value.anti_truncation=l)},null,512),[[Pe,p.value.anti_truncation]]),e[214]||(e[214]=t("span",{class:"slider"},null,-1))])]),t("div",{class:"feature-toggle",onClick:e[92]||(e[92]=l=>p.value.enable_prompt_perturbation=!p.value.enable_prompt_perturbation)},[t("div",ka,[t("div",{class:C(["feature-toggle-icon",{active:p.value.enable_prompt_perturbation}])},[a(i(u),{icon:"lucide:shuffle"})],2),e[215]||(e[215]=t("div",{class:"feature-toggle-text"},[t("span",{class:"feature-name"},"å†…å®¹æ··æ·†"),t("span",{class:"feature-hint"},"å¯¹æç¤ºè¯è¿›è¡Œå¾®æ‰°åŠ¨ï¼Œå¢žåŠ è¾“å‡ºå¤šæ ·æ€§")],-1))]),t("label",{class:"switch small",onClick:e[91]||(e[91]=$(()=>{},["stop"]))},[U(t("input",{type:"checkbox","onUpdate:modelValue":e[90]||(e[90]=l=>p.value.enable_prompt_perturbation=l)},null,512),[[Pe,p.value.enable_prompt_perturbation]]),e[216]||(e[216]=t("span",{class:"slider"},null,-1))])]),p.value.enable_prompt_perturbation?(o(),r("div",wa,[t("div",Ca,[e[220]||(e[220]=t("label",null,"æ‰°åŠ¨å¼ºåº¦",-1)),t("div",{class:C(["custom-select",{open:d.value==="new-model-perturbation"}])},[t("div",{class:"select-trigger",onClick:e[93]||(e[93]=$(l=>A("new-model-perturbation",l),["stop"]))},[t("span",null,y({light:"è½»åº¦",medium:"ä¸­åº¦",heavy:"é‡åº¦"}[p.value.perturbation_strength]||"è½»åº¦"),1),a(i(u),{icon:"lucide:chevron-down",class:C(["chevron",{rotated:d.value==="new-model-perturbation"}])},null,8,["class"])]),(o(),I(O,{to:"body"},[a(N,{name:"dropdown-fade"},{default:R(()=>[d.value==="new-model-perturbation"?(o(),r("div",{key:0,class:"select-options",style:ie(m.value)},[t("div",{class:"select-option",onClick:e[94]||(e[94]=l=>{p.value.perturbation_strength="light",d.value=null})},[...e[217]||(e[217]=[t("span",null,"è½»åº¦",-1)])]),t("div",{class:"select-option",onClick:e[95]||(e[95]=l=>{p.value.perturbation_strength="medium",d.value=null})},[...e[218]||(e[218]=[t("span",null,"ä¸­åº¦",-1)])]),t("div",{class:"select-option",onClick:e[96]||(e[96]=l=>{p.value.perturbation_strength="heavy",d.value=null})},[...e[219]||(e[219]=[t("span",null,"é‡åº¦",-1)])])],4)):_("",!0)]),_:1})])),(o(),I(O,{to:"body"},[d.value==="new-model-perturbation"?(o(),r("div",{key:0,class:"dropdown-overlay",onClick:e[97]||(e[97]=$(l=>d.value=null,["stop"]))})):_("",!0)]))],2)]),t("div",{class:"feature-toggle compact",onClick:e[100]||(e[100]=l=>p.value.enable_semantic_variants=!p.value.enable_semantic_variants)},[e[222]||(e[222]=t("div",{class:"feature-toggle-info"},[t("span",{class:"feature-name"},"è¯­ä¹‰å˜ä½“")],-1)),t("label",{class:"switch small",onClick:e[99]||(e[99]=$(()=>{},["stop"]))},[U(t("input",{type:"checkbox","onUpdate:modelValue":e[98]||(e[98]=l=>p.value.enable_semantic_variants=l)},null,512),[[Pe,p.value.enable_semantic_variants]]),e[221]||(e[221]=t("span",{class:"slider"},null,-1))])])])):_("",!0),a(Re,{modelValue:p.value.extra_params,"onUpdate:modelValue":e[101]||(e[101]=l=>p.value.extra_params=l)},null,8,["modelValue"])])],512),[[Ce,G.value]])])]),t("div",ha,[t("button",{class:"btn btn-secondary",onClick:e[102]||(e[102]=l=>Y.value=!1)},"å–æ¶ˆ"),t("button",{class:"btn btn-primary",onClick:Ye,disabled:!p.value.model_identifier||!p.value.name},[a(i(u),{icon:"lucide:check"}),e[223]||(e[223]=x(" æ·»åŠ  ",-1))],8,$a)])])])):_("",!0)]))]))}}),xa=Ue(Ma,[["__scopeId","data-v-678c7afb"]]),Ia={class:"model-config-view"},Aa={class:"config-header"},Va={class:"header-actions"},Pa={class:"m3-segmented-button"},Sa=["disabled"],Ta={key:0,class:"visual-editor"},Ua={key:0,class:"loading-state"},Ea={key:1,class:"error-state"},Da={key:1,class:"source-editor"},Oa={class:"source-toolbar"},La={class:"file-path"},ja={class:"monaco-container"},Ba={key:0,class:"validation-error"},za={class:"m3-dialog"},Fa={class:"dialog-header"},Wa={class:"dialog-body"},Ja={key:0,class:"loading-state"},Ra={key:1,class:"empty-state"},Na={key:2,class:"backup-list"},qa={class:"backup-info"},Ga={class:"backup-name"},Qa={class:"backup-meta"},Ha=["onClick","disabled"],Xa={class:"material-symbols-rounded"},Ya=Se({__name:"ModelConfigView",setup(he){const ye={minimap:{enabled:!0},fontSize:14,lineNumbers:"on",roundedSelection:!0,scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,wordWrap:"on",folding:!0,lineDecorationsWidth:10,lineNumbersMinChars:3,renderLineHighlight:"all",scrollbar:{verticalScrollbarSize:10,horizontalScrollbarSize:10}},h=vt(null),L=b(!0),V=b(!1),D=b(""),P=b("visual"),B=b(!0),T=b(""),be=b([]),ae=b({}),_e=b({}),K=b(""),q=b(""),Y=b(""),G=b(!1),d=b([]),m=b(!1),S=b(""),A=b({show:!1,message:"",type:"success"}),v=oe(()=>P.value==="source"?K.value!==q.value:Object.keys(ae.value).length>0);function Z(k){return k<1024?`${k} B`:k<1024*1024?`${(k/1024).toFixed(1)} KB`:`${(k/1024/1024).toFixed(1)} MB`}function re(k){h.value=k}function ce(){var k;h.value&&((k=h.value.getAction("editor.action.formatDocument"))==null||k.run())}async function ee(){var k;L.value=!0,D.value="";try{const c=await pt();if(!c.success||!c.data){D.value="èŽ·å–é…ç½®åˆ—è¡¨å¤±è´¥";return}const w=c.data.configs.find(Me=>Me.type==="model");if(!w){D.value="æœªæ‰¾åˆ°æ¨¡åž‹é…ç½®æ–‡ä»¶";return}T.value=w.path;const se=await mt(w.path);if(se.success&&se.data&&se.data.success)K.value=se.data.content||"",q.value=se.data.content||"",_e.value=se.data.parsed||{};else{D.value=((k=se.data)==null?void 0:k.error)||se.error||"åŠ è½½é…ç½®å†…å®¹å¤±è´¥";return}const fe=await _t(w.path);fe.success&&fe.data&&fe.data.success&&(be.value=fe.data.sections)}catch(c){D.value="åŠ è½½é…ç½®æ—¶å‘ç”Ÿé”™è¯¯",console.error(c)}finally{L.value=!1}}function $e(k,c){ae.value[k]=c}async function p(){var k,c;if(T.value){V.value=!0;try{if(P.value==="source"){const w=await ft(T.value,K.value);w.success&&w.data&&w.data.success?(q.value=K.value,E("é…ç½®å·²ä¿å­˜","success"),await ee()):E(((k=w.data)==null?void 0:k.error)||w.error||"ä¿å­˜å¤±è´¥","error")}else{if(Object.keys(ae.value).length===0){E("æ²¡æœ‰éœ€è¦ä¿å­˜çš„æ›´æ”¹","error");return}const w=await yt(T.value,ae.value);w.success&&w.data&&w.data.success?(ae.value={},E("é…ç½®å·²ä¿å­˜","success"),await ee()):E(((c=w.data)==null?void 0:c.error)||w.error||"ä¿å­˜å¤±è´¥","error")}}catch{E("ä¿å­˜é…ç½®å¤±è´¥","error")}finally{V.value=!1}}}async function ge(){if(T.value){m.value=!0;try{const k=await gt(T.value);k.success&&k.data&&k.data.success&&(d.value=k.data.backups)}catch{E("åŠ è½½å¤‡ä»½åˆ—è¡¨å¤±è´¥","error")}finally{m.value=!1}}}async function de(k){var c;if(T.value&&confirm(`ç¡®å®šè¦ä»Žå¤‡ä»½ "${k}" æ¢å¤é…ç½®å—ï¼Ÿå½“å‰é…ç½®å°†è¢«è¦†ç›–ã€‚`)){S.value=k;try{const w=await bt(T.value,k);w.success&&w.data&&w.data.success?(E("é…ç½®å·²æ¢å¤","success"),G.value=!1,await ee()):E(((c=w.data)==null?void 0:c.error)||w.error||"æ¢å¤å¤±è´¥","error")}catch{E("æ¢å¤å¤‡ä»½å¤±è´¥","error")}finally{S.value=""}}}function E(k,c){A.value={show:!0,message:k,type:c},setTimeout(()=>{A.value.show=!1},3e3)}return Te(G,k=>{k&&ge()}),Ne(()=>{ee(),B.value=window.matchMedia("(prefers-color-scheme: dark)").matches}),(k,c)=>(o(),r("div",Ia,[t("header",Aa,[c[9]||(c[9]=t("div",{class:"header-left"},[t("div",{class:"header-icon-container"},[t("span",{class:"material-symbols-rounded header-icon"},"psychology")]),t("div",{class:"header-info"},[t("h1",null,"æ¨¡åž‹é…ç½®"),t("p",null,"é…ç½® AI æ¨¡åž‹æä¾›å•†ã€API å¯†é’¥å’Œæ¨¡åž‹å‚æ•°")])],-1)),t("div",Va,[t("div",Pa,[t("button",{class:C(["segment",{active:P.value==="visual"}]),onClick:c[0]||(c[0]=w=>P.value="visual")},[...c[6]||(c[6]=[t("span",{class:"material-symbols-rounded"},"grid_view",-1),x(" å¯è§†åŒ– ",-1)])],2),t("button",{class:C(["segment",{active:P.value==="source"}]),onClick:c[1]||(c[1]=w=>P.value="source")},[...c[7]||(c[7]=[t("span",{class:"material-symbols-rounded"},"code",-1),x(" æºç  ",-1)])],2)]),t("button",{class:"m3-icon-button",onClick:c[2]||(c[2]=w=>G.value=!0),title:"å¤‡ä»½åŽ†å²"},[...c[8]||(c[8]=[t("span",{class:"material-symbols-rounded"},"history",-1)])]),t("button",{class:"m3-button filled",onClick:p,disabled:V.value||!v.value},[t("span",{class:C(["material-symbols-rounded",{spinning:V.value}])},y(V.value?"progress_activity":"save"),3),x(" "+y(V.value?"ä¿å­˜ä¸­...":"ä¿å­˜é…ç½®"),1)],8,Sa)])]),P.value==="visual"?(o(),r("div",Ta,[L.value?(o(),r("div",Ua,[...c[10]||(c[10]=[t("span",{class:"material-symbols-rounded spinning"},"progress_activity",-1),x(" åŠ è½½é…ç½®ä¸­... ",-1)])])):D.value?(o(),r("div",Ea,[c[11]||(c[11]=t("span",{class:"material-symbols-rounded"},"error",-1)),x(" "+y(D.value),1)])):(o(),I(xa,{key:2,"parsed-data":_e.value,"edited-values":ae.value,onUpdate:$e},null,8,["parsed-data","edited-values"]))])):(o(),r("div",Da,[t("div",Oa,[t("span",La,[c[12]||(c[12]=t("span",{class:"material-symbols-rounded"},"description",-1)),x(" "+y(T.value),1)]),t("div",{class:"toolbar-actions"},[t("button",{class:"m3-button text small",onClick:ce},[...c[13]||(c[13]=[t("span",{class:"material-symbols-rounded"},"format_align_left",-1),x(" æ ¼å¼åŒ– ",-1)])])])]),t("div",ja,[a(i(kt),{value:K.value,"onUpdate:value":c[3]||(c[3]=w=>K.value=w),language:"ini",theme:B.value?"vs-dark":"vs",options:ye,onMount:re},null,8,["value","theme"])]),Y.value?(o(),r("div",Ba,[c[14]||(c[14]=t("span",{class:"material-symbols-rounded"},"warning",-1)),x(" "+y(Y.value),1)])):_("",!0)])),a(N,{name:"dialog"},{default:R(()=>[G.value?(o(),r("div",{key:0,class:"m3-dialog-overlay",onClick:c[5]||(c[5]=$(w=>G.value=!1,["self"]))},[t("div",za,[t("div",Fa,[c[16]||(c[16]=t("h3",null,[t("span",{class:"material-symbols-rounded"},"history"),x(" å¤‡ä»½ç®¡ç† ")],-1)),t("button",{class:"m3-icon-button",onClick:c[4]||(c[4]=w=>G.value=!1)},[...c[15]||(c[15]=[t("span",{class:"material-symbols-rounded"},"close",-1)])])]),t("div",Wa,[m.value?(o(),r("div",Ja,[...c[17]||(c[17]=[t("span",{class:"material-symbols-rounded spinning"},"progress_activity",-1),x(" åŠ è½½å¤‡ä»½åˆ—è¡¨... ",-1)])])):d.value.length===0?(o(),r("div",Ra,[...c[18]||(c[18]=[t("span",{class:"material-symbols-rounded empty-icon"},"history_toggle_off",-1),x(" æš‚æ— å¤‡ä»½ ",-1)])])):(o(),r("div",Na,[(o(!0),r(X,null,te(d.value,w=>(o(),r("div",{key:w.name,class:"backup-item"},[t("div",qa,[t("span",Ga,y(w.name),1),t("span",Qa,y(w.created_at)+" Â· "+y(Z(w.size)),1)]),t("button",{class:"m3-button text",onClick:se=>de(w.name),disabled:S.value===w.name},[t("span",{class:C(["material-symbols-rounded",{spinning:S.value===w.name}])},y(S.value===w.name?"progress_activity":"restore"),3),c[19]||(c[19]=x(" æ¢å¤ ",-1))],8,Ha)]))),128))]))])])])):_("",!0)]),_:1}),a(N,{name:"toast"},{default:R(()=>[A.value.show?(o(),r("div",{key:0,class:C(["m3-snackbar",A.value.type])},[t("span",Xa,y(A.value.type==="success"?"check_circle":"error"),1),x(" "+y(A.value.message),1)],2)):_("",!0)]),_:1})]))}}),ni=Ue(Ya,[["__scopeId","data-v-4790ac05"]]);export{ni as default};
