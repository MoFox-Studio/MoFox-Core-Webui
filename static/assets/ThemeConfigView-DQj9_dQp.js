import{Y as Gt,Z as Nt,$ as Ut,a0 as zt,a1 as Pt,a2 as $t,a as Wt,v as Ft,r as Z,D as pt,b as It,m as Ht,N as Vt,a3 as kt,a4 as Mt,a5 as V,c as T,e as n,f as qt,g as X,a6 as vt,p as I,q as Q,L as Ot,t as st,F as Rt,h as Et,n as nt,w as jt,s as ft,O as lt,Q as ct,T as Xt,a7 as wt,a8 as Lt,a9 as At,o as S,_ as Qt}from"./index-I9RjNgOI.js";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{fromInt(t){return Gt(t)}toInt(t){return Nt(t[0],t[1],t[2])}distance(t,s){const a=t[0]-s[0],i=t[1]-s[1],h=t[2]-s[2];return a*a+i*i+h*h}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zt=10,Jt=3;class Kt{static quantize(t,s,a){const i=new Map,h=new Array,x=new Array,v=new Yt;let M=0;for(let c=0;c<t.length;c++){const w=t[c],R=i.get(w);R===void 0?(M++,h.push(v.fromInt(w)),x.push(w),i.set(w,1)):i.set(w,R+1)}const B=new Array;for(let c=0;c<M;c++){const w=x[c],R=i.get(w);R!==void 0&&(B[c]=R)}let f=Math.min(a,M);s.length>0&&(f=Math.min(f,s.length));const b=new Array;for(let c=0;c<s.length;c++)b.push(v.fromInt(s[c]));const y=f-b.length;if(s.length===0&&y>0)for(let c=0;c<y;c++){const w=Math.random()*100,R=Math.random()*201+-100,U=Math.random()*201+-100;b.push(new Array(w,R,U))}const l=new Array;for(let c=0;c<M;c++)l.push(Math.floor(Math.random()*f));const g=new Array;for(let c=0;c<f;c++){g.push(new Array);for(let w=0;w<f;w++)g[c].push(0)}const k=new Array;for(let c=0;c<f;c++){k.push(new Array);for(let w=0;w<f;w++)k[c].push(new te)}const A=new Array;for(let c=0;c<f;c++)A.push(0);for(let c=0;c<Zt;c++){for(let u=0;u<f;u++){for(let C=u+1;C<f;C++){const D=v.distance(b[u],b[C]);k[C][u].distance=D,k[C][u].index=u,k[u][C].distance=D,k[u][C].index=C}k[u].sort();for(let C=0;C<f;C++)g[u][C]=k[u][C].index}let w=0;for(let u=0;u<M;u++){const C=h[u],D=l[u],$=b[D],O=v.distance(C,$);let J=O,K=-1;for(let j=0;j<f;j++){if(k[D][j].distance>=4*O)continue;const ot=v.distance(C,b[j]);ot<J&&(J=ot,K=j)}K!==-1&&Math.abs(Math.sqrt(J)-Math.sqrt(O))>Jt&&(w++,l[u]=K)}if(w===0&&c!==0)break;const R=new Array(f).fill(0),U=new Array(f).fill(0),Y=new Array(f).fill(0);for(let u=0;u<f;u++)A[u]=0;for(let u=0;u<M;u++){const C=l[u],D=h[u],$=B[u];A[C]+=$,R[C]+=D[0]*$,U[C]+=D[1]*$,Y[C]+=D[2]*$}for(let u=0;u<f;u++){const C=A[u];if(C===0){b[u]=[0,0,0];continue}const D=R[u]/C,$=U[u]/C,O=Y[u]/C;b[u]=[D,$,O]}}const _=new Map;for(let c=0;c<f;c++){const w=A[c];if(w===0)continue;const R=v.toInt(b[c]);_.has(R)||_.set(R,w)}return _}}class te{constructor(){this.distance=-1,this.index=-1}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{static quantize(t){const s=new Map;for(let a=0;a<t.length;a++){const i=t[a];Ut(i)<255||s.set(i,(s.get(i)??0)+1)}return s}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt=5,P=33,rt=35937,G={RED:"red",GREEN:"green",BLUE:"blue"};class se{constructor(t=[],s=[],a=[],i=[],h=[],x=[]){this.weights=t,this.momentsR=s,this.momentsG=a,this.momentsB=i,this.moments=h,this.cubes=x}quantize(t,s){this.constructHistogram(t),this.computeMoments();const a=this.createBoxes(s);return this.createResult(a.resultCount)}constructHistogram(t){this.weights=Array.from({length:rt}).fill(0),this.momentsR=Array.from({length:rt}).fill(0),this.momentsG=Array.from({length:rt}).fill(0),this.momentsB=Array.from({length:rt}).fill(0),this.moments=Array.from({length:rt}).fill(0);const s=ee.quantize(t);for(const[a,i]of s.entries()){const h=zt(a),x=Pt(a),v=$t(a),M=8-dt,B=(h>>M)+1,f=(x>>M)+1,b=(v>>M)+1,y=this.getIndex(B,f,b);this.weights[y]=(this.weights[y]??0)+i,this.momentsR[y]+=i*h,this.momentsG[y]+=i*x,this.momentsB[y]+=i*v,this.moments[y]+=i*(h*h+x*x+v*v)}}computeMoments(){for(let t=1;t<P;t++){const s=Array.from({length:P}).fill(0),a=Array.from({length:P}).fill(0),i=Array.from({length:P}).fill(0),h=Array.from({length:P}).fill(0),x=Array.from({length:P}).fill(0);for(let v=1;v<P;v++){let M=0,B=0,f=0,b=0,y=0;for(let l=1;l<P;l++){const g=this.getIndex(t,v,l);M+=this.weights[g],B+=this.momentsR[g],f+=this.momentsG[g],b+=this.momentsB[g],y+=this.moments[g],s[l]+=M,a[l]+=B,i[l]+=f,h[l]+=b,x[l]+=y;const k=this.getIndex(t-1,v,l);this.weights[g]=this.weights[k]+s[l],this.momentsR[g]=this.momentsR[k]+a[l],this.momentsG[g]=this.momentsG[k]+i[l],this.momentsB[g]=this.momentsB[k]+h[l],this.moments[g]=this.moments[k]+x[l]}}}}createBoxes(t){this.cubes=Array.from({length:t}).fill(0).map(()=>new oe);const s=Array.from({length:t}).fill(0);this.cubes[0].r0=0,this.cubes[0].g0=0,this.cubes[0].b0=0,this.cubes[0].r1=P-1,this.cubes[0].g1=P-1,this.cubes[0].b1=P-1;let a=t,i=0;for(let h=1;h<t;h++){this.cut(this.cubes[i],this.cubes[h])?(s[i]=this.cubes[i].vol>1?this.variance(this.cubes[i]):0,s[h]=this.cubes[h].vol>1?this.variance(this.cubes[h]):0):(s[i]=0,h--),i=0;let x=s[0];for(let v=1;v<=h;v++)s[v]>x&&(x=s[v],i=v);if(x<=0){a=h+1;break}}return new ne(t,a)}createResult(t){const s=[];for(let a=0;a<t;++a){const i=this.cubes[a],h=this.volume(i,this.weights);if(h>0){const x=Math.round(this.volume(i,this.momentsR)/h),v=Math.round(this.volume(i,this.momentsG)/h),M=Math.round(this.volume(i,this.momentsB)/h),B=255<<24|(x&255)<<16|(v&255)<<8|M&255;s.push(B)}}return s}variance(t){const s=this.volume(t,this.momentsR),a=this.volume(t,this.momentsG),i=this.volume(t,this.momentsB),h=this.moments[this.getIndex(t.r1,t.g1,t.b1)]-this.moments[this.getIndex(t.r1,t.g1,t.b0)]-this.moments[this.getIndex(t.r1,t.g0,t.b1)]+this.moments[this.getIndex(t.r1,t.g0,t.b0)]-this.moments[this.getIndex(t.r0,t.g1,t.b1)]+this.moments[this.getIndex(t.r0,t.g1,t.b0)]+this.moments[this.getIndex(t.r0,t.g0,t.b1)]-this.moments[this.getIndex(t.r0,t.g0,t.b0)],x=s*s+a*a+i*i,v=this.volume(t,this.weights);return h-x/v}cut(t,s){const a=this.volume(t,this.momentsR),i=this.volume(t,this.momentsG),h=this.volume(t,this.momentsB),x=this.volume(t,this.weights),v=this.maximize(t,G.RED,t.r0+1,t.r1,a,i,h,x),M=this.maximize(t,G.GREEN,t.g0+1,t.g1,a,i,h,x),B=this.maximize(t,G.BLUE,t.b0+1,t.b1,a,i,h,x);let f;const b=v.maximum,y=M.maximum,l=B.maximum;if(b>=y&&b>=l){if(v.cutLocation<0)return!1;f=G.RED}else y>=b&&y>=l?f=G.GREEN:f=G.BLUE;switch(s.r1=t.r1,s.g1=t.g1,s.b1=t.b1,f){case G.RED:t.r1=v.cutLocation,s.r0=t.r1,s.g0=t.g0,s.b0=t.b0;break;case G.GREEN:t.g1=M.cutLocation,s.r0=t.r0,s.g0=t.g1,s.b0=t.b0;break;case G.BLUE:t.b1=B.cutLocation,s.r0=t.r0,s.g0=t.g0,s.b0=t.b1;break;default:throw new Error("unexpected direction "+f)}return t.vol=(t.r1-t.r0)*(t.g1-t.g0)*(t.b1-t.b0),s.vol=(s.r1-s.r0)*(s.g1-s.g0)*(s.b1-s.b0),!0}maximize(t,s,a,i,h,x,v,M){const B=this.bottom(t,s,this.momentsR),f=this.bottom(t,s,this.momentsG),b=this.bottom(t,s,this.momentsB),y=this.bottom(t,s,this.weights);let l=0,g=-1,k=0,A=0,_=0,c=0;for(let w=a;w<i;w++){if(k=B+this.top(t,s,w,this.momentsR),A=f+this.top(t,s,w,this.momentsG),_=b+this.top(t,s,w,this.momentsB),c=y+this.top(t,s,w,this.weights),c===0)continue;let R=(k*k+A*A+_*_)*1,U=c*1,Y=R/U;k=h-k,A=x-A,_=v-_,c=M-c,c!==0&&(R=(k*k+A*A+_*_)*1,U=c*1,Y+=R/U,Y>l&&(l=Y,g=w))}return new re(g,l)}volume(t,s){return s[this.getIndex(t.r1,t.g1,t.b1)]-s[this.getIndex(t.r1,t.g1,t.b0)]-s[this.getIndex(t.r1,t.g0,t.b1)]+s[this.getIndex(t.r1,t.g0,t.b0)]-s[this.getIndex(t.r0,t.g1,t.b1)]+s[this.getIndex(t.r0,t.g1,t.b0)]+s[this.getIndex(t.r0,t.g0,t.b1)]-s[this.getIndex(t.r0,t.g0,t.b0)]}bottom(t,s,a){switch(s){case G.RED:return-a[this.getIndex(t.r0,t.g1,t.b1)]+a[this.getIndex(t.r0,t.g1,t.b0)]+a[this.getIndex(t.r0,t.g0,t.b1)]-a[this.getIndex(t.r0,t.g0,t.b0)];case G.GREEN:return-a[this.getIndex(t.r1,t.g0,t.b1)]+a[this.getIndex(t.r1,t.g0,t.b0)]+a[this.getIndex(t.r0,t.g0,t.b1)]-a[this.getIndex(t.r0,t.g0,t.b0)];case G.BLUE:return-a[this.getIndex(t.r1,t.g1,t.b0)]+a[this.getIndex(t.r1,t.g0,t.b0)]+a[this.getIndex(t.r0,t.g1,t.b0)]-a[this.getIndex(t.r0,t.g0,t.b0)];default:throw new Error("unexpected direction $direction")}}top(t,s,a,i){switch(s){case G.RED:return i[this.getIndex(a,t.g1,t.b1)]-i[this.getIndex(a,t.g1,t.b0)]-i[this.getIndex(a,t.g0,t.b1)]+i[this.getIndex(a,t.g0,t.b0)];case G.GREEN:return i[this.getIndex(t.r1,a,t.b1)]-i[this.getIndex(t.r1,a,t.b0)]-i[this.getIndex(t.r0,a,t.b1)]+i[this.getIndex(t.r0,a,t.b0)];case G.BLUE:return i[this.getIndex(t.r1,t.g1,a)]-i[this.getIndex(t.r1,t.g0,a)]-i[this.getIndex(t.r0,t.g1,a)]+i[this.getIndex(t.r0,t.g0,a)];default:throw new Error("unexpected direction $direction")}}getIndex(t,s,a){return(t<<dt*2)+(t<<dt+1)+t+(s<<dt)+s+a}}class oe{constructor(t=0,s=0,a=0,i=0,h=0,x=0,v=0){this.r0=t,this.r1=s,this.g0=a,this.g1=i,this.b0=h,this.b1=x,this.vol=v}}class ne{constructor(t,s){this.requestedCount=t,this.resultCount=s}}class re{constructor(t,s){this.cutLocation=t,this.maximum=s}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{static quantize(t,s){const i=new se().quantize(t,s);return Kt.quantize(t,i,s)}}const ae={class:"theme-config-view"},ie={class:"config-content"},le={class:"preview-section"},ce={class:"preview-card"},de={class:"preview-body"},he=["src"],ue={class:"config-section"},me={class:"wallpaper-upload"},ge={key:0,class:"placeholder"},pe=["src"],ve={class:"upload-controls"},fe={key:0,class:"wallpaper-settings"},we={class:"setting-row"},xe=["value"],be={class:"setting-value"},ye={class:"setting-row"},Ce=["value"],Ie={class:"setting-value"},ke={class:"config-section"},Me={class:"color-presets"},Re=["onClick","title"],Ee={key:0,class:"material-symbols-rounded check-icon"},Le={class:"preset-label"},Ae={key:0,class:"config-section"},Be={class:"color-presets"},De=["onClick","title"],_e={key:0,class:"material-symbols-rounded check-icon"},Te={class:"config-section"},Se={class:"mode-toggles"},Ge={class:"modal-body"},Ne={class:"hsv-picker"},Ue={class:"color-controls"},ze={class:"hex-input-wrapper"},Pe={class:"sliders-container"},$e={class:"slider-row"},We={class:"slider-value"},Fe={class:"slider-row"},He={class:"slider-value"},Ve={class:"slider-row"},qe={class:"slider-value"},Oe=Wt({__name:"ThemeConfigView",setup(q){const t=Ft(),s=o=>{const e=document.createElement("canvas"),r=e.getContext("2d");if(r){const p=Math.min(128/o.width,128/o.height),m=Math.floor(o.width*p),E=Math.floor(o.height*p);e.width=m,e.height=E,r.drawImage(o,0,0,m,E);const L=r.getImageData(0,0,m,E).data,N=[];for(let z=0;z<L.length;z+=4){const H=L[z],mt=L[z+1],gt=L[z+2];if(L[z+3]<255)continue;const Ct=At(H,mt,gt);N.push(Ct)}const F=Bt.quantize(N,128),et=Lt.score(F).slice(0,4).map(z=>V(z));return t.setExtractedColors(et),et}return[]},a=async o=>new Promise((e,r)=>{const d=document.createElement("video"),p=document.createElement("canvas"),m=p.getContext("2d");d.src=URL.createObjectURL(o),d.muted=!0,d.playsInline=!0,d.addEventListener("loadedmetadata",()=>{d.currentTime=.1}),d.addEventListener("seeked",()=>{try{const W=Math.min(128/d.videoWidth,128/d.videoHeight);p.width=Math.floor(d.videoWidth*W),p.height=Math.floor(d.videoHeight*W),m.drawImage(d,0,0,p.width,p.height);const N=m.getImageData(0,0,p.width,p.height).data,F=[];for(let H=0;H<N.length;H+=4){const mt=N[H],gt=N[H+1],yt=N[H+2];if(N[H+3]<255)continue;const St=At(mt,gt,yt);F.push(St)}const tt=Bt.quantize(F,128),z=Lt.score(tt).slice(0,4).map(H=>V(H));URL.revokeObjectURL(d.src),e(z)}catch(E){URL.revokeObjectURL(d.src),r(E)}}),d.addEventListener("error",()=>{URL.revokeObjectURL(d.src),r(new Error("视频加载失败"))})}),i=Z(null),h=()=>{var o;(o=i.value)==null||o.click()},x=async o=>{const e=o.target;if(e.files&&e.files[0]){const r=e.files[0],d=r.type.startsWith("image/"),p=r.type.startsWith("video/");if(!d&&!p){wt("请上传图片或视频文件","error");return}if(p&&r.size>50*1024*1024){wt("视频文件过大，请上传小于 50MB 的文件","error");return}try{await t.setWallpaper(r);let m=[];if(p)m=await a(r);else{const E=new FileReader;m=await new Promise((W,L)=>{E.onload=async N=>{var et;const F=(et=N.target)==null?void 0:et.result,tt=new Image;tt.src=F,await new Promise(z=>{tt.onload=z}),W(s(tt))},E.onerror=L,E.readAsDataURL(r)})}t.setExtractedColors(m),m.length>0&&t.setSourceColor(m[0])}catch(m){console.error("处理壁纸失败:",m),wt("处理壁纸失败，请重试","error")}}},v=()=>{t.setWallpaper(null),i.value&&(i.value.value="")},M=pt(()=>t.wallpaper&&t.wallpaperType==="image"?{backgroundImage:`url(${t.wallpaper})`,backgroundSize:"cover",backgroundPosition:"center"}:{}),B=pt(()=>{const o={opacity:t.wallpaperOpacity,filter:`blur(${t.wallpaperBlur}px)`};return t.wallpaper&&t.wallpaperType==="image"&&(o.backgroundImage=`url(${t.wallpaper})`,o.backgroundSize="cover",o.backgroundPosition="center"),o}),f=Z(!1),b=Z("#6750A4"),y=Z("6750A4"),l=It({r:103,g:80,b:164}),g=It({h:266,s:51,v:64}),k=Z(null),A=Z(null),_=Z(!1),c=Z(!1),w=o=>{const e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(o);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:{r:0,g:0,b:0}},R=(o,e,r)=>"#"+((1<<24)+(o<<16)+(e<<8)+r).toString(16).slice(1).toUpperCase(),U=(o,e,r)=>{o/=255,e/=255,r/=255;const d=Math.max(o,e,r),p=Math.min(o,e,r);let m=0,E,W=d;const L=d-p;if(E=d===0?0:L/d,d===p)m=0;else{switch(d){case o:m=(e-r)/L+(e<r?6:0);break;case e:m=(r-o)/L+2;break;case r:m=(o-e)/L+4;break}m/=6}return{h:Math.round(m*360),s:Math.round(E*100),v:Math.round(W*100)}},Y=(o,e,r)=>{let d,p,m;const E=Math.floor(o/60),W=o/60-E,L=r*(1-e/100),N=r*(1-W*e/100),F=r*(1-(1-W)*e/100);switch(E%6){case 0:d=r,p=F,m=L;break;case 1:d=N,p=r,m=L;break;case 2:d=L,p=r,m=F;break;case 3:d=L,p=N,m=r;break;case 4:d=F,p=L,m=r;break;case 5:d=r,p=L,m=N;break;default:d=0,p=0,m=0}return{r:Math.round(d*2.55),g:Math.round(p*2.55),b:Math.round(m*2.55)}},u=()=>{const o=Y(g.h,g.s,g.v);l.r=o.r,l.g=o.g,l.b=o.b;const e=R(o.r,o.g,o.b);b.value=e,y.value=e.replace("#","")},C=()=>{b.value=t.sourceColor,y.value=t.sourceColor.replace("#","");const o=w(t.sourceColor);l.r=o.r,l.g=o.g,l.b=o.b;const e=U(o.r,o.g,o.b);g.h=e.h,g.s=e.s,g.v=e.v,f.value=!0},D=()=>{f.value=!1},$=()=>{if(y.value=y.value.replace(/[^0-9A-Fa-f]/g,"").toUpperCase(),y.value.length===6){const o="#"+y.value;b.value=o;const e=w(o);l.r=e.r,l.g=e.g,l.b=e.b;const r=U(e.r,e.g,e.b);g.h=r.h,g.s=r.s,g.v=r.v}},O=()=>{const o=R(l.r,l.g,l.b);b.value=o,y.value=o.replace("#","");const e=U(l.r,l.g,l.b);g.h=e.h,g.s=e.s,g.v=e.v},J=o=>{_.value=!0,j(o)},K=o=>{c.value=!0,ot(o)},j=o=>{if(!k.value)return;const e=k.value.getBoundingClientRect();let r,d;if("touches"in o){const E=o.touches[0];if(!E)return;r=E.clientX,d=E.clientY}else r=o.clientX,d=o.clientY;let p=(r-e.left)/e.width,m=(d-e.top)/e.height;p=Math.max(0,Math.min(1,p)),m=Math.max(0,Math.min(1,m)),g.s=Math.round(p*100),g.v=Math.round((1-m)*100),u()},ot=o=>{if(!A.value)return;const e=A.value.getBoundingClientRect();let r;if("touches"in o){const p=o.touches[0];if(!p)return;r=p.clientX}else r=o.clientX;let d=(r-e.left)/e.width;d=Math.max(0,Math.min(1,d)),g.h=Math.round(d*360),u()},at=()=>{_.value=!1,c.value=!1},it=o=>{_.value&&j(o),c.value&&ot(o)};Ht(()=>{window.addEventListener("mousemove",it),window.addEventListener("mouseup",at),window.addEventListener("touchmove",it),window.addEventListener("touchend",at)}),Vt(()=>{window.removeEventListener("mousemove",it),window.removeEventListener("mouseup",at),window.removeEventListener("touchmove",it),window.removeEventListener("touchend",at)});const Dt=()=>{t.setSourceColor(b.value),D()},xt=o=>{t.theme!==o&&t.toggleTheme()},ht=[{color:"#6750A4",name:"深紫"},{color:"#386A20",name:"苔绿"},{color:"#006874",name:"青色"},{color:"#9C4146",name:"砖红"},{color:"#7D5260",name:"粉红"},{color:"#825500",name:"棕色"},{color:"#006D31",name:"翠绿"},{color:"#006783",name:"湖蓝"}],_t=pt(()=>ht.map(o=>{const e=kt(Mt(o.color));return{source:o.color,name:o.name,c1:V(e.schemes.light.primary),c2:V(e.schemes.light.secondaryContainer),c3:V(e.schemes.light.tertiaryContainer),c4:V(e.schemes.light.surfaceVariant)}})),ut=o=>ht.some(e=>e.color.toLowerCase()===o.toLowerCase()),Tt=o=>{const e=ht.find(r=>r.color.toLowerCase()===o.toLowerCase());return e?e.name:"自定义"},bt=o=>{let e,r,d,p;if(o.c1)e=o.c1,r=o.c2,d=o.c3,p=o.c4;else{const m=kt(Mt(o.source));e=V(m.schemes.light.primary),r=V(m.schemes.light.secondaryContainer),d=V(m.schemes.light.tertiaryContainer),p=V(m.schemes.light.surfaceVariant)}return{background:`conic-gradient(
      ${e} 0% 25%, 
      ${r} 25% 50%, 
      ${d} 50% 75%, 
      ${p} 75% 100%
    )`}};return(o,e)=>(S(),T("div",ae,[e[33]||(e[33]=n("div",{class:"page-header"},[n("div",{class:"header-content"},[n("h1",null,"风格与壁纸"),n("p",{class:"subtitle"},"自定义 WebUI 的外观和配色方案")])],-1)),n("div",ie,[n("div",le,[n("div",ce,[e[10]||(e[10]=n("div",{class:"preview-header"},[n("div",{class:"preview-title"},"预览")],-1)),n("div",de,[I(t).wallpaper?(S(),T("div",{key:0,class:"preview-wallpaper",style:Q(B.value)},[I(t).wallpaperType==="video"?(S(),T("video",{key:0,class:"preview-wallpaper-media",src:I(t).wallpaper,autoplay:"",loop:"",muted:"",playsinline:""},null,8,he)):X("",!0)],4)):X("",!0),e[9]||(e[9]=vt('<div class="mock-ui" data-v-d0e9e78b><div class="mock-sidebar" data-v-d0e9e78b><div class="mock-icon active" data-v-d0e9e78b></div><div class="mock-icon" data-v-d0e9e78b></div><div class="mock-icon" data-v-d0e9e78b></div></div><div class="mock-content" data-v-d0e9e78b><div class="mock-card primary" data-v-d0e9e78b><div class="mock-line title" data-v-d0e9e78b></div><div class="mock-line" data-v-d0e9e78b></div></div><div class="mock-row" data-v-d0e9e78b><div class="mock-card secondary" data-v-d0e9e78b></div><div class="mock-card tertiary" data-v-d0e9e78b></div></div></div></div>',1))])])]),n("div",ue,[e[18]||(e[18]=n("h2",null,"壁纸",-1)),n("div",me,[n("div",{class:"wallpaper-preview",style:Q(M.value)},[I(t).wallpaper?I(t).wallpaperType==="video"?(S(),T("video",{key:1,disablePictureInPicture:"",class:"preview-video",src:I(t).wallpaper,autoplay:"",loop:"",muted:"",playsinline:""},null,8,pe)):X("",!0):(S(),T("div",ge,[...e[11]||(e[11]=[n("span",{class:"material-symbols-rounded"},"image",-1),n("span",null,"暂无壁纸",-1)])])),I(t).wallpaper?(S(),T("button",{key:2,class:"remove-btn",onClick:v,title:"移除壁纸"},[...e[12]||(e[12]=[n("span",{class:"material-symbols-rounded"},"close",-1)])])):X("",!0)],4),n("div",ve,[n("input",{type:"file",ref_key:"fileInput",ref:i,accept:"image/*,video/mp4,video/webm",style:{display:"none"},onChange:x},null,544),n("button",{class:"btn-primary",onClick:h},[...e[13]||(e[13]=[n("span",{class:"material-symbols-rounded"},"upload",-1),Ot(" 上传壁纸 ",-1)])]),e[14]||(e[14]=n("p",{class:"hint"},"支持图片（JPG/PNG）和视频（MP4/WebM），视频文件需小于50MB",-1)),e[15]||(e[15]=n("p",{class:"hint"},"上传后将自动从图片或视频第一帧提取主题色",-1))])]),I(t).wallpaper?(S(),T("div",fe,[n("div",we,[e[16]||(e[16]=n("span",{class:"setting-label"},"不透明度",-1)),n("input",{type:"range",min:"0",max:"1",step:"0.1",value:I(t).wallpaperOpacity,onInput:e[0]||(e[0]=r=>I(t).setWallpaperOpacity(Number(r.target.value)))},null,40,xe),n("span",be,st(I(t).wallpaperOpacity),1)]),n("div",ye,[e[17]||(e[17]=n("span",{class:"setting-label"},"模糊度",-1)),n("input",{type:"range",min:"0",max:"50",step:"1",value:I(t).wallpaperBlur,onInput:e[1]||(e[1]=r=>I(t).setWallpaperBlur(Number(r.target.value)))},null,40,Ce),n("span",Ie,st(I(t).wallpaperBlur)+"px",1)])])):X("",!0)]),n("div",ke,[e[20]||(e[20]=n("h2",null,"基本颜色",-1)),n("div",Me,[(S(!0),T(Rt,null,Et(_t.value,r=>(S(),T("button",{key:r.source,class:nt(["preset-item",{active:I(t).sourceColor.toLowerCase()===r.source.toLowerCase()}]),onClick:d=>I(t).setSourceColor(r.source),title:r.source},[n("div",{class:"preset-circle",style:Q(bt(r))},[I(t).sourceColor.toLowerCase()===r.source.toLowerCase()?(S(),T("span",Ee,"check")):X("",!0)],4),n("span",Le,st(Tt(r.source)),1)],10,Re))),128)),n("button",{class:nt(["preset-item custom-picker",{active:!ut(I(t).sourceColor)}]),onClick:C,title:"自定义颜色"},[n("div",{class:"preset-circle custom-circle",style:Q(ut(I(t).sourceColor)?{}:{background:I(t).sourceColor})},[n("span",{class:"material-symbols-rounded more-icon",style:Q({color:ut(I(t).sourceColor)?"":"#fff"})},"palette",4)],4),e[19]||(e[19]=n("span",{class:"preset-label"},"自定义",-1))],2)])]),I(t).extractedColors.length>0?(S(),T("div",Ae,[e[21]||(e[21]=n("h2",null,"图片取色",-1)),n("div",Be,[(S(!0),T(Rt,null,Et(I(t).extractedColors,r=>(S(),T("button",{key:r,class:nt(["preset-item",{active:I(t).sourceColor.toLowerCase()===r.toLowerCase()}]),onClick:d=>I(t).setSourceColor(r),title:r},[n("div",{class:"preset-circle",style:Q(bt({source:r}))},[I(t).sourceColor.toLowerCase()===r.toLowerCase()?(S(),T("span",_e,"check")):X("",!0)],4)],10,De))),128))])])):X("",!0),n("div",Te,[e[24]||(e[24]=n("h2",null,"深色主题",-1)),n("div",Se,[n("button",{class:nt(["mode-card",{active:I(t).theme==="light"}]),onClick:e[2]||(e[2]=r=>xt("light"))},[...e[22]||(e[22]=[vt('<div class="mode-preview light" data-v-d0e9e78b><span class="material-symbols-rounded" data-v-d0e9e78b>light_mode</span></div><span class="mode-label" data-v-d0e9e78b>浅色模式</span><div class="radio-indicator" data-v-d0e9e78b><div class="radio-inner" data-v-d0e9e78b></div></div>',3)])],2),n("button",{class:nt(["mode-card",{active:I(t).theme==="dark"}]),onClick:e[3]||(e[3]=r=>xt("dark"))},[...e[23]||(e[23]=[vt('<div class="mode-preview dark" data-v-d0e9e78b><span class="material-symbols-rounded" data-v-d0e9e78b>dark_mode</span></div><span class="mode-label" data-v-d0e9e78b>深色模式</span><div class="radio-indicator" data-v-d0e9e78b><div class="radio-inner" data-v-d0e9e78b></div></div>',3)])],2)])])]),qt(Xt,{name:"fade"},{default:jt(()=>[f.value?(S(),T("div",{key:0,class:"modal-overlay",onClick:D},[n("div",{class:"modal-content",onClick:e[8]||(e[8]=ft(()=>{},["stop"]))},[n("div",{class:"modal-header"},[e[26]||(e[26]=n("h3",null,"自定义主题色",-1)),n("button",{class:"close-btn",onClick:D},[...e[25]||(e[25]=[n("span",{class:"material-symbols-rounded"},"close",-1)])])]),n("div",Ge,[n("div",Ne,[n("div",{class:"saturation-area",ref_key:"saturationArea",ref:k,style:Q({backgroundColor:`hsl(${g.h}, 100%, 50%)`}),onMousedown:J,onTouchstart:ft(J,["prevent"])},[e[27]||(e[27]=n("div",{class:"saturation-white"},null,-1)),e[28]||(e[28]=n("div",{class:"saturation-black"},null,-1)),n("div",{class:"saturation-cursor",style:Q({left:`${g.s}%`,top:`${100-g.v}%`,backgroundColor:b.value})},null,4)],36),n("div",{class:"hue-slider",ref_key:"hueSlider",ref:A,onMousedown:K,onTouchstart:ft(K,["prevent"])},[n("div",{class:"hue-cursor",style:Q({left:`${g.h/360*100}%`})},null,4)],544)]),n("div",Ue,[n("div",ze,[e[29]||(e[29]=n("span",{class:"hex-prefix"},"#",-1)),lt(n("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=r=>y.value=r),onInput:$,class:"hex-input",maxlength:"6"},null,544),[[ct,y.value]])]),n("div",Pe,[n("div",$e,[e[30]||(e[30]=n("span",{class:"slider-label red"},"R",-1)),lt(n("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":e[5]||(e[5]=r=>l.r=r),onInput:O,class:"color-slider red-slider"},null,544),[[ct,l.r,void 0,{number:!0}]]),n("span",We,st(l.r),1)]),n("div",Fe,[e[31]||(e[31]=n("span",{class:"slider-label green"},"G",-1)),lt(n("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":e[6]||(e[6]=r=>l.g=r),onInput:O,class:"color-slider green-slider"},null,544),[[ct,l.g,void 0,{number:!0}]]),n("span",He,st(l.g),1)]),n("div",Ve,[e[32]||(e[32]=n("span",{class:"slider-label blue"},"B",-1)),lt(n("input",{type:"range",min:"0",max:"255","onUpdate:modelValue":e[7]||(e[7]=r=>l.b=r),onInput:O,class:"color-slider blue-slider"},null,544),[[ct,l.b,void 0,{number:!0}]]),n("span",qe,st(l.b),1)])])])]),n("div",{class:"modal-footer"},[n("button",{class:"btn-text",onClick:D},"取消"),n("button",{class:"btn-filled",onClick:Dt},"应用")])])])):X("",!0)]),_:1})]))}}),Xe=Qt(Oe,[["__scopeId","data-v-d0e9e78b"]]);export{Xe as default};
