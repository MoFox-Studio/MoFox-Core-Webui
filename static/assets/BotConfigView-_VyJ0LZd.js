import{a as re,D as V,c as l,o,e as a,g as b,f as x,L as f,p as w,t as c,F as P,h as j,_ as ie,r as k,m as se,N as ue,G as de,n as E,O as Q,P as ve,Q as pe,J as ye,R as ne,l as H,w as oe,T as le,S as G,s as me}from"./index-CLTUvmfq.js";import{V as ke}from"./index-BJr7i0xa.js";import{I as B}from"./iconify-D-PHLALP.js";import{S as he}from"./OwnerListEditor.vue_vue_type_style_index_0_scoped_1c0bad24_lang-CKrKAY3Z.js";import{O as ge}from"./OwnerListEditor-Cq64olWJ.js";import{s as ae}from"./dialog-BHZSvFQz.js";import"./ConfirmDialog-CVrd_dnE.js";const _e={class:"key-value-editor"},be={class:"editor-header"},fe={key:0,class:"editor-hint"},we={class:"kv-list"},Ce=["value","placeholder","onInput"],$e=["value","placeholder","onInput"],xe=["onClick"],Se={key:0,class:"empty-state"},Ie=re({__name:"KeyValueEditor",props:{value:{},title:{},description:{},keyPlaceholder:{},valuePlaceholder:{},emptyText:{},addButtonText:{}},emits:["update"],setup(i,{emit:h}){const _=i,g=h,m=V(()=>!_.value||typeof _.value!="object"?[]:Object.entries(_.value).map(([d,v])=>({key:d,value:String(v||"")})));function F(d){const v={};return d.forEach(p=>{p.key&&(v[p.key]=p.value)}),v}function A(){const d=[...m.value,{key:"",value:""}];g("update",F(d))}function L(d){const v=m.value.filter((p,C)=>C!==d);g("update",F(v))}function T(d,v){const p=[...m.value];p[d]={...p[d],key:v},g("update",F(p))}function I(d,v){const p=[...m.value];p[d]={...p[d],value:v},g("update",F(p))}return(d,v)=>(o(),l("div",_e,[a("div",be,[a("h4",null,[x(w(B),{icon:"lucide:settings-2"}),f(" "+c(i.title||"键值对配置"),1)]),i.description?(o(),l("p",fe,c(i.description),1)):b("",!0)]),a("div",we,[(o(!0),l(P,null,j(m.value,(p,C)=>(o(),l("div",{key:C,class:"kv-item"},[a("input",{type:"text",class:"input key-input",value:p.key,placeholder:i.keyPlaceholder||"键",onInput:S=>T(C,S.target.value)},null,40,Ce),v[0]||(v[0]=a("span",{class:"separator"},"=",-1)),a("input",{type:"text",class:"input value-input",value:p.value,placeholder:i.valuePlaceholder||"值",onInput:S=>I(C,S.target.value)},null,40,$e),a("button",{class:"btn-icon delete-btn",onClick:S=>L(C),title:"删除"},[x(w(B),{icon:"lucide:trash-2"})],8,xe)]))),128)),m.value.length===0?(o(),l("div",Se,[x(w(B),{icon:"lucide:package-open"}),a("p",null,c(i.emptyText||"暂无配置项"),1)])):b("",!0)]),a("button",{class:"btn btn-outline add-btn",onClick:A},[x(w(B),{icon:"lucide:plus"}),f(" "+c(i.addButtonText||"添加配置"),1)])]))}}),Ee=ie(Ie,[["__scopeId","data-v-3d1da23a"]]),Te={class:"bot-config-editor"},Be={class:"config-nav-bar"},Oe={class:"nav-tabs"},Fe=["onClick"],Le={class:"tab-header"},Ve={class:"tab-title"},Ne={class:"tab-description"},De={key:0,class:"config-toolbar"},Pe={key:1,class:"search-shortcut"},Ae={key:0,class:"search-results-hint"},Me={class:"config-content"},Re=["onClick"],Ge={class:"group-title"},Ue={key:0,class:"expert-badge"},Ke={class:"group-meta"},je={class:"group-hint"},ze={class:"group-content"},We={key:0,class:"field-card special-editor-card"},He={key:0,class:"readonly-badge"},Je={class:"field-left"},qe={class:"field-header"},Qe={class:"field-name"},Xe={key:0,class:"advanced-badge"},Ye={key:1,class:"expert-badge"},Ze={class:"field-description"},et=["checked","disabled","onChange"],tt={class:"field-header"},at={class:"field-name"},st={class:"field-key"},nt={key:0,class:"advanced-badge"},ot={key:1,class:"expert-badge"},lt={class:"field-description"},rt={class:"field-input"},it=["onClick"],ut={key:0,class:"custom-select-dropdown"},ct=["onClick"],dt=["value","placeholder","disabled","readonly","onInput"],vt=["value","placeholder","disabled","readonly","onInput"],pt={key:3,class:"password-input"},yt=["type","value","placeholder","disabled","readonly","onInput"],mt=["disabled","onClick"],kt=["min","max","step","value","placeholder","disabled","readonly","onInput"],ht={key:5,class:"array-input"},gt=["value","placeholder","disabled","readonly","onInput"],_t=["value","placeholder","disabled","readonly","onInput"],bt=re({__name:"BotConfigEditor",props:{parsedData:{},editedValues:{},configSchema:{}},emits:["update"],setup(i,{emit:h}){const _=i,g=h,m=k(null),F=n=>{m.value===n?m.value=null:m.value=n},A=()=>{m.value=null},L=n=>{n.target.closest(".custom-select-container")||A()},T=(n,s)=>{const t=n.find(r=>r.value===s);return t?t.label:s};se(()=>{document.addEventListener("click",L)}),ue(()=>{document.removeEventListener("click",L)});const I=V(()=>_.configSchema.map(n=>({key:n.key,name:n.name,description:n.description}))),d=k("");de(()=>_.configSchema,n=>{n.length>0&&n[0]&&(!d.value||!n.find(s=>s.key===d.value))&&(d.value=n[0].key)},{immediate:!0});const v=k(""),p=k(!1),C=k({}),S=k({}),O=k(!1),K=k(null);function N(){var n;v.value="",(n=K.value)==null||n.blur()}function M(n){(n.ctrlKey||n.metaKey)&&n.key==="k"&&(n.preventDefault(),ye(()=>{var s;(s=K.value)==null||s.focus()}))}const R=V(()=>{if(!v.value)return 0;let n=0;return J.value.forEach(s=>{n+=q(s).length}),n});se(()=>{document.addEventListener("keydown",M)}),ue(()=>{document.removeEventListener("keydown",M)}),V(()=>{const n=JSON.parse(JSON.stringify(_.parsedData));for(const[s,t]of Object.entries(_.editedValues)){const[r,u]=s.split(".",2);r&&u&&(n[r]||(n[r]={}),n[r][u]=t)}return n});const z=V(()=>I.value.find(n=>n.key===d.value)??I.value[0]),X=V(()=>_.configSchema.find(n=>n.key===d.value)),D=V(()=>{const n=X.value;return n?[n]:[]}),J=V(()=>{if(!v.value)return D.value;const n=v.value.toLowerCase();return D.value.filter(s=>s.name.toLowerCase().includes(n)?!0:s.fields.some(t=>t.name.toLowerCase().includes(n)||t.description.toLowerCase().includes(n)||t.key.toLowerCase().includes(n)))}),Y=V(()=>D.value.some(n=>n.fields.some(s=>s.advanced)));function q(n){let s=n.fields.filter(t=>!t.hidden);if(v.value){const t=v.value.toLowerCase();s=s.filter(r=>r.name.toLowerCase().includes(t)||r.description.toLowerCase().includes(t)||r.key.toLowerCase().includes(t))}return p.value||(s=s.filter(t=>!t.advanced)),s}function Z(n){S.value[n]=!S.value[n]}function $(n){if(n in _.editedValues)return _.editedValues[n];const[s,t]=n.split(".",2);if(s&&t&&_.parsedData[s])return _.parsedData[s][t]}function ee(n){return Array.isArray(n)?n.join(", "):""}function te(n){return n.split(",").map(s=>s.trim()).filter(s=>s)}return(n,s)=>{var t,r;return o(),l("div",Te,[a("div",Be,[a("div",Oe,[(o(!0),l(P,null,j(I.value,u=>(o(),l("button",{key:u.key,class:E(["nav-tab",{active:d.value===u.key}]),onClick:e=>d.value=u.key},c(u.name),11,Fe))),128))])]),a("div",Le,[a("h3",Ve,c((t=z.value)==null?void 0:t.name),1),a("p",Ne,c((r=z.value)==null?void 0:r.description),1),Y.value?(o(),l("button",{key:0,class:"add-rule-btn",onClick:s[0]||(s[0]=u=>p.value=!p.value)},[x(w(B),{icon:p.value?"lucide:eye-off":"lucide:eye"},null,8,["icon"]),f(" "+c(p.value?"隐藏高级选项":"显示高级选项"),1)])):b("",!0)]),D.value.length>1?(o(),l("div",De,[a("div",{class:E(["search-box",{focused:O.value}])},[x(w(B),{icon:"lucide:search"}),Q(a("input",{ref_key:"searchInputRef",ref:K,"onUpdate:modelValue":s[1]||(s[1]=u=>v.value=u),type:"text",placeholder:"搜索配置项... (Ctrl+K)",class:"search-input",onFocus:s[2]||(s[2]=u=>O.value=!0),onBlur:s[3]||(s[3]=u=>O.value=!1),onKeydown:ve(N,["escape"])},null,544),[[pe,v.value]]),v.value?(o(),l("button",{key:0,class:"clear-search-btn",onClick:N,title:"清除搜索"},[x(w(B),{icon:"lucide:x"})])):b("",!0),!v.value&&!O.value?(o(),l("span",Pe,"Ctrl+K")):b("",!0)],2),v.value?(o(),l("div",Ae," 找到 "+c(R.value)+" 个匹配项 ",1)):b("",!0)])):b("",!0),a("div",Me,[(o(!0),l(P,null,j(J.value,u=>(o(),l("div",{key:u.key,class:E(["config-group",{collapsed:S.value[u.key],"expert-group":u.expert,"single-group":D.value.length===1}])},[D.value.length>1?(o(),l("div",{key:0,class:"group-header",onClick:e=>Z(u.key)},[a("div",Ge,[x(w(B),{icon:u.icon},null,8,["icon"]),a("h3",null,c(u.name),1),u.expert?(o(),l("span",Ue,"专家")):b("",!0)]),a("div",Ke,[a("span",je,c(u.description),1),x(w(B),{icon:S.value[u.key]?"lucide:chevron-down":"lucide:chevron-up"},null,8,["icon"])])],8,Re)):b("",!0),Q(a("div",ze,[(o(!0),l(P,null,j(q(u),e=>(o(),l(P,{key:e.key},[e.specialEditor?(o(),l("div",We,[e.specialEditor==="owner_list"?(o(),H(w(ge),{key:0,value:$(e.key),title:e.name,description:e.description,onUpdate:y=>g("update",e.key,y)},null,8,["value","title","description","onUpdate"])):e.specialEditor==="string_array"?(o(),H(w(he),{key:1,value:$(e.key),title:e.name,description:e.description,placeholder:e.placeholder,emptyText:"暂无"+e.name,addButtonText:"添加"+e.name,onUpdate:y=>g("update",e.key,y)},null,8,["value","title","description","placeholder","emptyText","addButtonText","onUpdate"])):e.specialEditor==="key_value"?(o(),H(w(Ee),{key:2,value:$(e.key),title:e.name,description:e.description,onUpdate:y=>g("update",e.key,y)},null,8,["value","title","description","onUpdate"])):b("",!0)])):(o(),l("div",{key:1,class:E(["field-card",{inline:e.type==="boolean",advanced:e.advanced,expert:e.expert,readonly:e.readonly}])},[e.readonly?(o(),l("span",He,"只读")):b("",!0),e.type==="boolean"?(o(),l(P,{key:1},[a("div",Je,[a("div",qe,[a("span",Qe,c(e.name),1),e.advanced?(o(),l("span",Xe,"高级")):b("",!0),e.expert?(o(),l("span",Ye,"专家")):b("",!0)]),a("div",Ze,c(e.description),1)]),a("label",{class:E(["toggle-switch",{disabled:e.readonly}])},[a("input",{type:"checkbox",checked:!!$(e.key),disabled:e.readonly,onChange:y=>g("update",e.key,y.target.checked)},null,40,et),s[4]||(s[4]=a("span",{class:"toggle-slider"},null,-1))],2)],64)):(o(),l(P,{key:2},[a("div",tt,[a("span",at,c(e.name),1),a("span",st,c(e.key),1),e.advanced?(o(),l("span",nt,"高级")):b("",!0),e.expert?(o(),l("span",ot,"专家")):b("",!0)]),a("div",lt,c(e.description),1),a("div",rt,[e.type==="select"?(o(),l("div",{key:0,class:E(["custom-select-container",{"is-open":m.value===e.key,"is-disabled":e.readonly}])},[a("div",{class:"custom-select-trigger",onClick:y=>!e.readonly&&F(e.key)},[a("span",null,c(T(e.options||[],$(e.key)??e.default)),1),x(w(B),{icon:"lucide:chevron-down",class:"select-arrow"})],8,it),x(le,{name:"select-fade"},{default:oe(()=>[m.value===e.key?(o(),l("div",ut,[(o(!0),l(P,null,j(e.options,y=>(o(),l("div",{key:y.value,class:E(["custom-select-option",{"is-selected":($(e.key)??e.default)===y.value}]),onClick:Yt=>{g("update",e.key,y.value),A()}},[f(c(y.label)+" ",1),($(e.key)??e.default)===y.value?(o(),H(w(B),{key:0,icon:"lucide:check",class:"check-icon"})):b("",!0)],10,ct))),128))])):b("",!0)]),_:2},1024)],2)):e.type==="textarea"?(o(),l("textarea",{key:1,class:"input textarea",value:String($(e.key)??e.default??""),placeholder:e.placeholder,disabled:e.readonly,readonly:e.readonly,onInput:y=>g("update",e.key,y.target.value),rows:"3"},null,40,dt)):e.type==="textarea_tall"?(o(),l("textarea",{key:2,class:"input textarea textarea-tall",value:String($(e.key)??e.default??""),placeholder:e.placeholder,disabled:e.readonly,readonly:e.readonly,onInput:y=>g("update",e.key,y.target.value),rows:"7"},null,40,vt)):e.type==="password"?(o(),l("div",pt,[a("input",{type:C.value[e.key]?"text":"password",class:"input",value:$(e.key)??"",placeholder:e.placeholder,disabled:e.readonly,readonly:e.readonly,onInput:y=>g("update",e.key,y.target.value)},null,40,yt),a("button",{class:"toggle-visibility",type:"button",disabled:e.readonly,onClick:y=>C.value[e.key]=!C.value[e.key]},[x(w(B),{icon:C.value[e.key]?"lucide:eye-off":"lucide:eye"},null,8,["icon"])],8,mt)])):e.type==="number"?(o(),l("input",{key:4,type:"number",class:"input",min:e.min,max:e.max,step:e.step,value:$(e.key)??e.default??"",placeholder:e.placeholder,disabled:e.readonly,readonly:e.readonly,onInput:y=>g("update",e.key,parseFloat(y.target.value)||0)},null,40,kt)):e.type==="array"?(o(),l("div",ht,[a("input",{type:"text",class:"input",value:ee($(e.key)),placeholder:e.placeholder,disabled:e.readonly,readonly:e.readonly,onInput:y=>g("update",e.key,te(y.target.value))},null,40,gt),s[5]||(s[5]=a("span",{class:"input-hint"},"多个值用逗号分隔",-1))])):(o(),l("input",{key:6,type:"text",class:"input",value:$(e.key)??e.default??"",placeholder:e.placeholder,disabled:e.readonly,readonly:e.readonly,onInput:y=>g("update",e.key,y.target.value)},null,40,_t))])],64))],2))],64))),128))],512),[[ne,D.value.length===1||!S.value[u.key]]])],2))),128))])])}}}),ft=ie(bt,[["__scopeId","data-v-95de0288"]]),W="core-config",U={SCHEMA:`${W}/schema`,CONFIG:`${W}/config`,CONFIG_RAW:`${W}/config/raw`,BACKUPS:`${W}/config/backups`,RESTORE:i=>`${W}/config/restore/${encodeURIComponent(i)}`};async function wt(){const i=await G.get(U.SCHEMA);if(i.success&&i.data)return i.data;throw new Error(i.error||"获取配置 Schema 失败")}async function Ct(){const i=await G.get(U.CONFIG);if(i.success&&i.data)return i.data;throw new Error(i.error||"获取配置失败")}async function $t(i){const h=await G.put(U.CONFIG,{updates:i});if(h.success&&h.data)return h.data;throw new Error(h.error||"更新配置失败")}async function ce(){const i=await G.get(U.CONFIG_RAW);if(i.success&&i.data)return i.data;throw new Error(i.error||"获取原始配置失败")}async function xt(i){const h=await G.post(U.CONFIG_RAW,{content:i});if(h.success&&h.data)return h.data;throw new Error(h.error||"保存原始配置失败")}async function St(){const i=await G.get(U.BACKUPS);if(i.success&&i.data)return i.data;throw new Error(i.error||"获取备份列表失败")}async function It(i){const h=await G.post(U.RESTORE(i));if(h.success&&h.data)return h.data;throw new Error(h.error||"恢复备份失败")}const Et={class:"core-config-view"},Tt={class:"config-header"},Bt={class:"header-left"},Ot={class:"header-info"},Ft={key:0,class:"version-tag"},Lt={class:"header-actions"},Vt={class:"segmented-button-group"},Nt=["disabled"],Dt={class:"editor-area"},Pt={key:0,class:"loading-state"},At={key:1,class:"error-state"},Mt={class:"editor-area source-editor-wrap"},Rt={class:"modal-panel"},Gt={class:"modal-header"},Ut={class:"modal-body"},Kt={key:0,class:"loading-state small"},jt={key:1,class:"empty-state"},zt={key:2,class:"backup-list"},Wt={class:"backup-info"},Ht={class:"backup-name"},Jt={class:"backup-meta"},qt=["onClick","disabled"],Qt={class:"material-symbols-rounded"},Xt=re({__name:"BotConfigView",setup(i){const h=k(!1),_=k(!1),g=k(""),m=k("visual"),F=k(""),A=k([]),L=k({}),T=k({}),I=k(""),d=k(""),v={minimap:{enabled:!0},fontSize:14,lineNumbers:"on",roundedSelection:!0,scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2,wordWrap:"on",lineHeight:24,fontFamily:"'JetBrains Mono', 'Fira Code', Consolas, monospace",padding:{top:16,bottom:16},folding:!0,lineDecorationsWidth:10,lineNumbersMinChars:3,renderLineHighlight:"all",scrollbar:{verticalScrollbarSize:10,horizontalScrollbarSize:10}},p=k(!1),C=k(!1),S=k([]),O=k(""),K=k(!0),N=k({visible:!1,message:"",type:"success"}),M=V(()=>m.value==="source"?I.value!==d.value:Object.keys(T.value).length>0);se(async()=>{await R(),K.value=window.matchMedia("(prefers-color-scheme: dark)").matches});async function R(){h.value=!0,g.value="";try{const[s,t,r]=await Promise.all([wt(),Ct(),ce()]);A.value=s.groups,F.value=s.version,L.value=t.config,T.value={},I.value=r.content,d.value=r.content}catch(s){g.value=s.message||"加载配置失败",console.error("加载配置失败:",s)}finally{h.value=!1}}async function z(){M.value&&!await ae({title:"放弃更改",message:"当前有未保存的更改，刷新将丢失这些更改。确定要继续吗？",type:"warning",confirmText:"继续刷新",cancelText:"取消"})||await R()}function X(s,t){T.value[s]=t;const r=s.split(".");if(r.length===2){const[u,e]=r;u&&e&&(L.value[u]||(L.value[u]={}),L.value[u][e]=t)}}async function D(){if(m.value="source",Object.keys(T.value).length>0&&!await ae({title:"切换编辑模式",message:"切换到源码模式将丢弃未保存的可视化更改，确定继续？",type:"warning",confirmText:"切换",cancelText:"取消"})){m.value="visual";return}try{const s=await ce();I.value=s.content,d.value=s.content,T.value={}}catch(s){n(s.message||"获取源码失败","error"),m.value="visual"}}function J(){}async function Y(){var s;if(M.value){_.value=!0;try{if(m.value==="source"){const t=await xt(I.value);t.success?(n(t.message||"配置已保存","success"),d.value=I.value,await R()):n(t.message||"保存失败","error")}else{const t=await $t(T.value);t.success?(n("配置已保存","success"),T.value={},await R()):(n(t.message||"保存配置失败","error"),(s=t.failed_keys)!=null&&s.length&&console.error("以下配置项保存失败:",t.failed_keys))}}catch(t){n(t.message||"保存请求失败","error"),console.error("保存配置失败:",t)}finally{_.value=!1}}}async function q(){p.value=!0,await Z()}async function Z(){C.value=!0;try{const s=await St();S.value=s.backups}catch(s){n(s.message||"获取备份列表失败","error")}finally{C.value=!1}}async function $(s){if(await ae({title:"恢复备份",message:`确定要从备份 "${s}" 恢复配置吗？当前配置将被覆盖。`,type:"danger",confirmText:"确认恢复",cancelText:"取消"})){O.value=s;try{const r=await It(s);r.success?(n(r.message||"恢复成功","success"),p.value=!1,await R()):n(r.message||"恢复失败","error")}catch(r){n(r.message||"恢复请求失败","error")}finally{O.value=""}}}function ee(s){return s?new Date(s).toLocaleString("zh-CN",{hour12:!1}):""}function te(s){return s<1024?`${s} B`:s<1024*1024?`${(s/1024).toFixed(1)} KB`:`${(s/1024/1024).toFixed(2)} MB`}function n(s,t="success"){N.value={visible:!0,message:s,type:t},setTimeout(()=>{N.value.visible=!1},3e3)}return(s,t)=>(o(),l("div",Et,[a("header",Tt,[a("div",Bt,[t[6]||(t[6]=a("div",{class:"header-icon-container"},[a("span",{class:"material-symbols-rounded header-icon"},"settings")],-1)),a("div",Ot,[t[5]||(t[5]=a("h1",null,"Core 配置",-1)),a("p",null,[t[4]||(t[4]=f("管理 Neo-MoFox Core 层配置 ",-1)),F.value?(o(),l("span",Ft,"v"+c(F.value),1)):b("",!0)])])]),a("div",Lt,[a("div",Vt,[a("button",{class:E(["segmented-btn",{active:m.value==="visual"}]),onClick:t[0]||(t[0]=r=>m.value="visual"),title:"可视化编辑"},[...t[7]||(t[7]=[a("span",{class:"material-symbols-rounded"},"tune",-1),f(" 可视化 ",-1)])],2),a("button",{class:E(["segmented-btn",{active:m.value==="source"}]),onClick:D,title:"源码编辑"},[...t[8]||(t[8]=[a("span",{class:"material-symbols-rounded"},"code",-1),f(" 源码 ",-1)])],2)]),a("button",{class:"m3-icon-button",onClick:q,title:"备份历史"},[...t[9]||(t[9]=[a("span",{class:"material-symbols-rounded"},"history",-1)])]),a("button",{class:"m3-icon-button",onClick:z,title:"刷新配置"},[a("span",{class:E(["material-symbols-rounded",{spinning:h.value}])},"refresh",2)]),a("button",{class:"m3-button filled",onClick:Y,disabled:_.value||!M.value},[a("span",{class:E(["material-symbols-rounded",{spinning:_.value}])},c(_.value?"progress_activity":"save"),3),f(" "+c(_.value?"保存中...":M.value?"保存配置":"无变更"),1)],8,Nt)])]),Q(a("div",Dt,[h.value?(o(),l("div",Pt,[...t[10]||(t[10]=[a("span",{class:"material-symbols-rounded spinning"},"progress_activity",-1),f(" 加载配置中... ",-1)])])):g.value?(o(),l("div",At,[t[12]||(t[12]=a("span",{class:"material-symbols-rounded"},"error",-1)),f(" "+c(g.value)+" ",1),a("button",{class:"m3-button text",onClick:z},[...t[11]||(t[11]=[a("span",{class:"material-symbols-rounded"},"refresh",-1),f(" 重试 ",-1)])])])):(o(),H(ft,{key:2,"parsed-data":L.value,"edited-values":T.value,"config-schema":A.value,onUpdate:X},null,8,["parsed-data","edited-values","config-schema"]))],512),[[ne,m.value==="visual"]]),Q(a("div",Mt,[a("div",{class:"source-toolbar"},[t[14]||(t[14]=a("span",{class:"material-symbols-rounded"},"description",-1)),t[15]||(t[15]=a("span",{class:"source-path"},"config/core.toml",-1)),a("div",{class:"source-toolbar-actions"},[a("button",{class:"m3-icon-button small",onClick:J,title:"格式化"},[...t[13]||(t[13]=[a("span",{class:"material-symbols-rounded"},"format_align_left",-1)])])])]),x(w(ke),{value:I.value,"onUpdate:value":t[1]||(t[1]=r=>I.value=r),language:"ini",theme:K.value?"vs-dark":"vs",options:v},null,8,["value","theme"])],512),[[ne,m.value==="source"]]),x(le,{name:"modal"},{default:oe(()=>[p.value?(o(),l("div",{key:0,class:"modal-overlay",onClick:t[3]||(t[3]=me(r=>p.value=!1,["self"]))},[a("div",Rt,[a("div",Gt,[t[17]||(t[17]=a("span",{class:"material-symbols-rounded modal-header-icon"},"history",-1)),t[18]||(t[18]=a("h2",null,"配置备份历史",-1)),a("button",{class:"m3-icon-button",onClick:t[2]||(t[2]=r=>p.value=!1)},[...t[16]||(t[16]=[a("span",{class:"material-symbols-rounded"},"close",-1)])])]),a("div",Ut,[C.value?(o(),l("div",Kt,[...t[19]||(t[19]=[a("span",{class:"material-symbols-rounded spinning"},"progress_activity",-1),f(" 加载备份列表... ",-1)])])):S.value.length===0?(o(),l("div",jt,[...t[20]||(t[20]=[a("span",{class:"material-symbols-rounded"},"folder_open",-1),f(" 暂无备份记录 ",-1)])])):(o(),l("ul",zt,[(o(!0),l(P,null,j(S.value,r=>(o(),l("li",{key:r.name,class:"backup-item"},[a("div",Wt,[a("span",Ht,c(r.name),1),a("div",Jt,[t[21]||(t[21]=a("span",{class:"material-symbols-rounded small-icon"},"schedule",-1)),f(" "+c(ee(r.created_at))+" ",1),t[22]||(t[22]=a("span",{class:"sep"},"·",-1)),t[23]||(t[23]=a("span",{class:"material-symbols-rounded small-icon"},"data_object",-1)),f(" "+c(te(r.size)),1)])]),a("button",{class:"m3-button tonal small",onClick:u=>$(r.name),disabled:O.value===r.name},[a("span",{class:E(["material-symbols-rounded",{spinning:O.value===r.name}])},c(O.value===r.name?"progress_activity":"restore"),3),f(" "+c(O.value===r.name?"恢复中...":"恢复"),1)],8,qt)]))),128))]))])])])):b("",!0)]),_:1}),x(le,{name:"toast"},{default:oe(()=>[N.value.visible?(o(),l("div",{key:0,class:E(["m3-snackbar",N.value.type])},[a("span",Qt,c(N.value.type==="success"?"check_circle":"error"),1),f(" "+c(N.value.message),1)],2)):b("",!0)]),_:1})]))}}),la=ie(Xt,[["__scopeId","data-v-0bbdec60"]]);export{la as default};
